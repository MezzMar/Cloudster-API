(this.webpackJsonpCloudster=this.webpackJsonpCloudster||[]).push([[0],{293:function(e,a,t){e.exports=t.p+"static/media/folder.78445f96.svg"},294:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-audio.4dbf7341.svg"},295:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-Mimetypes-App-x-msdos-program.71a3d0c1.svg"},296:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-compress.48168696.svg"},297:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-html.8b8629d0.svg"},298:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-ImageGeneric.1d8fe391.svg"},299:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-iso.6032e341.svg"},300:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-json.4dde5351.svg"},301:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-Mimetypes-App-x-javascript.f316c01e.svg"},302:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-Mimetypes-X-office-document.d52fc926.svg"},303:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-Mimetypes-X-office-presentation.d209dc93.svg"},304:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-Mimetypes-X-office-spreadsheet.fc0d7531.svg"},305:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-pdf.5fd1241c.svg"},306:function(e,a,t){e.exports=t.p+"static/media/Paomedia-Small-N-Flat-Book.276dfa45.svg"},307:function(e,a,t){e.exports=t.p+"static/media/Paomedia-Small-N-Flat-File-text.ca4a83c0.svg"},308:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-Mimetypes-Text-x-java.15c53d6e.svg"},309:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-video.41a44ff7.svg"},310:function(e,a,t){e.exports=t.p+"static/media/Papirus-Team-Papirus-zerosize.a1a2034f.svg"},405:function(e,a,t){e.exports=t(616)},410:function(e,a,t){},44:function(e,a,t){e.exports=t.p+"static/media/background_study_by_hibelton_dc28kuo-fullview.ad58eeea.jpg"},615:function(e,a,t){},616:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(19),i=t.n(o),l=(t(410),t(695)),c=t(104),s=t.n(c),u=t(212),m=t.n(u),d=t(655),p=t(346),g=t(681),f=t(25),h=t(40),b=t(9),v=t(661),E=t(658),y=t(659),x=t(55),w=t(660),C=t(704),k=t(293),j=t.n(k),O=t(294),S=t.n(O),T=t(295),N=t.n(T),M=t(296),I=t.n(M),R=t(297),F=t.n(R),P=t(298),A=t.n(P),W=t(299),D=t.n(W),L=t(300),z=t.n(L),B=t(301),q=t.n(B),U=t(302),H=t.n(U),G=t(303),$=t.n(G),J=t(304),_=t.n(J),Z=t(305),V=t.n(Z),K=t(306),X=t.n(K),Y=t(307),Q=t.n(Y),ee=t(308),ae=t.n(ee),te=t(309),ne=t.n(te),re=t(310),oe=t.n(re),ie=r.a.forwardRef((function(e,a){return r.a.createElement(h.b,Object.assign({innerRef:a},e))}));ie.displayName="reactLink";var le=function(e){return e.json().then((function(a){return e.ok?a:Promise.reject(a)}))},ce=function(e,a){if(!e)return j.a;switch(a){case"jpg":case"png":return A.a;case"exe":case"msi":return N.a;case"mp3":case"wav":case"m4a":return S.a;case"mp4":case"mkv":return ne.a;case"rar":case"zip":return I.a;case"json":return z.a;case"js":case"jsx":return q.a;case"jar":return ae.a;case"iso":return D.a;case"pdf":return V.a;case"txt":return Q.a;case"epub":return X.a;case"doc":case"docx":return H.a;case"pptx":return $.a;case"xlsx":return _.a;case"html":return F.a;default:return oe.a}},se=t(44),ue=t.n(se),me=Object(d.a)((function(e){return{box:Object(b.a)({gridColumnStart:"1",gridColumnEnd:"3",gridRowStart:"1",gridRowEnd:"3",backgroundImage:"url(".concat(ue.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},e.breakpoints.down("xs"),{gridColumnStart:"1",gridColumnEnd:"2",gridRowStart:"1",gridRowEnd:"4"}),card:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12},grow:{flexGrow:1},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"}}})),de=function(){var e=me();return r.a.createElement(C.a,{textAlign:"center",display:"flex",width:1,justifyContent:"center",alignItems:"center",className:e.box},r.a.createElement(E.a,{className:e.card},r.a.createElement(y.a,null,r.a.createElement(x.a,{variant:"h5",component:"h2"},"Lo sentimos!"),r.a.createElement(x.a,{variant:"body2",component:"p"},"Debes iniciar sesi\xf3n para visitar esta p\xe1gina.")),r.a.createElement(w.a,null,r.a.createElement(v.a,{component:ie,to:"/login",underline:"none"},r.a.createElement(C.a,{fontWeight:"fontWeightBold"},"Inicia Sesi\xf3n")),r.a.createElement("div",{className:e.grow}),r.a.createElement(v.a,{component:ie,to:"/register",underline:"none"},r.a.createElement(C.a,{fontWeight:"fontWeightBold"},"Registrarte")))))},pe=t(39),ge=t(20),fe=t(6),he=t(674),be=t(673),ve=t(662),Ee=t(623),ye=t(676),xe=t(706),we=t(675),Ce=t(314),ke=t.n(Ce),je=t(315),Oe=t.n(je),Se=t(217),Te=t.n(Se),Ne=t(316),Me=t.n(Ne),Ie=t(317),Re=t.n(Ie),Fe=t(700),Pe={user:{id:"",usuario:"",nombre:"",apellido:"",pregunta1:0,pregunta2:0,desde:"",nivel:0},playing:0,folder:0,history:[],theme:!1,search:"",logStatus:1,mobileOpen:!1},Ae=Object(n.createContext)(Pe),We=Ae.Provider,De=function(e,a){var t=a.payload,n=a.type;switch(t&&"undefined"!==typeof t.theme&&localStorage.setItem("theme",t.theme||""),n){case"update":return Object(fe.a)(Object(fe.a)({},e),t);case"login":return Object(fe.a)(Object(fe.a)(Object(fe.a)({},e),t),{},{logStatus:2});case"moveForward":return Object(fe.a)(Object(fe.a)({},e),{},{history:[].concat(Object(pe.a)(e.history),[e.folder]),folder:t});case"moveBack":var r=Object(fe.a)({},e);return r.folder=e.history.pop(),r;case"moveHome":return Object(fe.a)(Object(fe.a)({},e),{},{history:[],folder:0});case"clean":return Object(fe.a)(Object(fe.a)({},e),{},{search:""});case"reset":default:return localStorage.clear(),Object(fe.a)(Object(fe.a)({},Pe),{},{logStatus:0})}},Le=function(e){var a=e.children,t=Object(n.useReducer)(De,Pe),o=Object(ge.a)(t,2),i=o[0],l=o[1];return r.a.createElement(We,{value:{state:i,dispatch:l}},a)},ze=t(215),Be=t.n(ze),qe=t(311),Ue=t(106),He=t(665),Ge=t(664),$e=t(667),Je=t(666),_e=t(221),Ze=t(663),Ve=Object(d.a)((function(e){return{popper:{zIndex:1e4},text:{color:"white"},image:{width:164,height:164},paper:{margin:e.spacing(1),backgroundColor:"inherit"},paperMod:{padding:e.spacing(2),margin:"auto",maxWidth:700},modal:{display:"flex",alignItems:"center",justifyContent:"center"},file:{margin:"0px 5px 10px",cursor:"pointer"}}})),Ke={open:!1,openModal:!1,progress:null,total:null},Xe=function(e,a){switch(a.type){case"start":return Object(fe.a)(Object(fe.a)({},e),{},{progress:0,total:a.total});case"add":var t=e.progress+a.progress;return Object(fe.a)(Object(fe.a)({},e),{},{progress:t});case"end":return Object(fe.a)(Object(fe.a)({},e),{},{progress:0,total:0});default:return Object(fe.a)(Object(fe.a)({},e),a)}},Ye=function(e){var a=e.file,t=e.move,n=t.setMovingFile,o=t.movingFile,i=Object(Ue.a)(e,["file","move"]),l=Ve(),c=Object(f.g)(),s=a.ino,u=a.name,m=a.ext,d=a.isFile,p=r.a.useReducer(Xe,Ke),g=Object(ge.a)(p,2),h=g[0],b=g[1],v=i.updateFolder,E=i.updatePlayer,y=r.a.useRef(null),w=r.a.useRef(h.open),k=u.length>20?u.substring(0,27).trim()+"..."+m:u;r.a.useEffect((function(){w.current&&!h.open&&y.current.focus(),w.current=h.open}),[h.open]);var j=function(e){y.current&&y.current.contains(e.target)||b({open:!1})},O=function(){var e=Object(qe.a)(Be.a.mark((function e(a,t){var n,r,o,i,l,c,s,u,m;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files/".concat(a,"/download"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});case 2:n=e.sent,r=n.body.getReader(),o=[],b({type:"start",total:+n.headers.get("Content-Length")});case 6:return e.next=9,r.read();case 9:if(i=e.sent,l=i.done,c=i.value,!l){e.next=14;break}return e.abrupt("break",18);case 14:o.push(c),b({type:"add",progress:c.length}),e.next=6;break;case 18:s=new Blob(o),u=window.URL.createObjectURL(s),(m=document.createElement("a")).href=u,m.download=t,document.body.appendChild(m),m.click(),m.remove();case 26:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),S=function(e){"Tab"===e.index&&(e.preventDefault(),b({open:!0}))},T=r.a.createElement(_e.a,{color:"primary",elevation:0,className:l.paper},r.a.createElement("img",{src:ce(d,m),alt:m,width:"64",height:"64"}),r.a.createElement(x.a,{variant:"body2",className:i.useTheme?l.text:"",style:{overflowWrap:"break-word"}},k));return d?r.a.createElement(ve.a,{style:{height:"120px",opacity:o&&s===o.ino?"0.6":"1"},item:!0,xs:4,sm:3,md:2,lg:1},r.a.createElement(C.a,{textAlign:"center",className:l.file},r.a.createElement(C.a,{ref:y,"aria-controls":h.open?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){o||b({open:!h.open})},onContextMenu:function(e){return e.preventDefault()}},T),r.a.createElement(Ze.a,{className:l.popper,open:h.open,anchorEl:y.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,o=e.placement;return r.a.createElement(Ge.a,Object.assign({},t,{style:{transformOrigin:"bottom"===o?"center top":"center bottom"}}),r.a.createElement(_e.a,null,r.a.createElement(He.a,{onClickAway:j},r.a.createElement(Je.a,{autoFocusItem:h.open,id:"menu-list-grow",onKeyDown:S},r.a.createElement($e.a,{onClick:function(){return O(s,u)}},"Descargar"),r.a.createElement($e.a,{onClick:function(){return E(s),void c.push("/reproductor")}},"Reproducir"),r.a.createElement($e.a,{onClick:function(){return b({open:!1}),void n(a)}},"Mover"),r.a.createElement($e.a,{onClick:function(){return b({open:!1}),void i.openModal(a)}},"Informaci\xf3n")))))})))):r.a.createElement(ve.a,{item:!0,xs:4,sm:3,md:2,lg:1,className:l.modal},r.a.createElement(C.a,{onClick:function(){return v(s)},onContextMenu:function(e){return e.preventDefault()},textAlign:"center",className:l.file},T))},Qe=t(669),ea=t(668),aa=Object(d.a)((function(e){return{image:{width:164,height:164},paperMod:Object(b.a)({padding:e.spacing(2),paddingTop:0,margin:"auto",maxWidth:700},e.breakpoints.down("xs"),{maxWidth:300}),modal:{display:"flex",alignItems:"center",justifyContent:"center"}}})),ta=function(e){var a=e.file,t=e.handleClose,n=e.open,o=aa(),i=new Date(a.lastModified||a.birthtime).toLocaleString("es-VE");return a?r.a.createElement(ea.a,{open:n,className:o.modal,onClose:function(){return t()}},r.a.createElement(Qe.a,{id:"file-dialog-title",style:{textAlign:"center"}},"Informaci\xf3n del archivo"),r.a.createElement(_e.a,{className:o.paperMod},r.a.createElement(ve.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(ve.a,{item:!0},r.a.createElement("div",{className:o.image},r.a.createElement("img",{src:ce(a.isFile,a.ext),alt:a.ext,width:"164",height:"164"}))),r.a.createElement(ve.a,{item:!0,xs:12,sm:8,container:!0},r.a.createElement(ve.a,{item:!0,xs:!0,container:!0,direction:"row",spacing:2},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"body2",color:"textSecondary"},"Nombre:"),r.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1",style:{wordWrap:"break-word"}},a.name)),r.a.createElement(ve.a,{item:!0,xs:8},r.a.createElement(x.a,{variant:"body2",color:"textSecondary"},"Subido por:"),r.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1"},a.upBy),r.a.createElement(x.a,{variant:"body2",color:"textSecondary"},"\xdaltima modificaci\xf3n:"),r.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1"},i)),r.a.createElement(ve.a,{item:!0,xs:4},r.a.createElement(x.a,{variant:"body2",color:"textSecondary"},"Tama\xf1o:"),r.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1"},a.size),r.a.createElement(x.a,{variant:"body2",color:"textSecondary"},"Nivel"),r.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1"},a.nivel))))))):""},na=t(705),ra=t(313),oa=t.n(ra),ia=t(216),la=t.n(ia),ca=Object(d.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"},input:{display:"none"},toolbar:{maxHeight:"64px",position:"static"},container:{display:"flex",flexWrap:"wrap",flexGrow:1},menuButton:{marginRight:e.spacing(2)},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paperMod:{padding:e.spacing(2),maxWidth:700,textAlign:"center"}}})),sa={fileField:"",fileFieldName:"",originalName:"",ext:""},ua=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},ma=new RegExp("[!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~]+","g"),da=new RegExp("^[\\w\\s\\-]*$","i"),pa=function(e){var a=e.className,t=e.state,n=e.theme,o=e.changeName,i=e.onChange,l=e.cleanState,c=e.handleClose;return t.fileField?r.a.createElement(ve.a,{item:!0,container:!0,xs:12,justify:"center"},r.a.createElement(ve.a,{item:!0},r.a.createElement("img",{src:ce(!0,t.ext),width:"164",height:"164",alt:"file"})),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Nombre:"),r.a.createElement(na.a,{fullWidth:!0,value:t.fileFieldName,variant:"outlined",style:{textAlign:"center"},onChange:o})),r.a.createElement(ve.a,{item:!0,xs:6,style:{paddingTop:"15px"}},r.a.createElement(be.a,{variant:"contained",color:"secondary",onClick:l},"Limpiar")),r.a.createElement(ve.a,{item:!0,xs:6,style:{paddingTop:"15px"}},r.a.createElement(be.a,{variant:"contained",color:"primary",onClick:function(){return c()}},"Aceptar"))):r.a.createElement(ve.a,{item:!0,container:!0,xs:12,justify:"center"},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement("input",{accept:"/*",onChange:function(e){return i(e)},className:a,id:"icon-button-file",type:"file"}),r.a.createElement("label",{htmlFor:"icon-button-file"},r.a.createElement(Ee.a,{color:n?"":"primary","aria-label":"upload picture",component:"span"},r.a.createElement(oa.a,{style:{fontSize:164}})))))},ga=function(e){var a=e.open,t=e.handleClose,o=ca(),i=Object(n.useReducer)(ua,sa),l=Object(ge.a)(i,2),c=l[0],s=l[1],u=Object(n.useContext)(Ae).state.theme;return a?r.a.createElement(ea.a,{open:a,className:o.modal,onClose:function(){s({fileField:null}),t("",!0)}},r.a.createElement(Qe.a,{id:"file-dialog-title",className:o.title},c.fileField?"Informaci\xf3n del archivo":"Selecciona un archivo..."),r.a.createElement(_e.a,{className:o.paperMod},r.a.createElement(ve.a,null,r.a.createElement(pa,{className:o.input,state:c,theme:u,changeName:function(e){e.target.value.match(da)&&s({fileFieldName:e.target.value})},onChange:function(e){var a=e.target.files[0].name.normalize("NFD").replace(/[\u0300-\u036f]/g,""),t=la.a.extname(a),n=la.a.basename(a,t);t=t.substring(1),s({fileField:e.target.files[0],ext:t,fileFieldName:n.replace(ma,""),originalName:n.replace(ma,"")})},cleanState:function(){s({fileFieldName:c.originalName,fileField:null})},handleClose:function(){return t(c,!0)}})))):""},fa=t(319),ha=t.n(fa),ba=t(318),va=t.n(ba),Ea=Object(d.a)((function(e){return{main:{overflow:"auto",display:"grid",gridTemplateRows:"48px 1fr",width:"100%"},anotherRow:{gridTemplateRows:"48px 1fr 48px"},peachColor:{backgroundColor:"#fff9c4"},bar:{position:"sticky"},title:{flexGrow:1,textAlign:"center"},input:{display:"none"},container:{display:"flex",flexWrap:"wrap",flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paperMod:{padding:e.spacing(2),margin:"auto",maxWidth:700,textAlign:"center"},sectionDesktop:Object(b.a)({},e.breakpoints.down("xs"),{display:"none"}),sectionMobile:Object(b.a)({},e.breakpoints.down("xs"),{textAlign:"center","& .MuiIconButton-edgeStart":{margin:0}}),movingBar:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between",padding:"0.25rem 1rem",borderTop:"1px solid grey"},inline:{display:"inline"},hideOnBig:Object(b.a)({display:"none"},e.breakpoints.down("xs"),{display:"inline-block"})}})),ya=function(e){return r.a.createElement(Fe.a,Object.assign({elevation:6,variant:"filled"},e))},xa={open:!1,message:"",severity:"",fileForModal:"",uploadModal:!1,files:null,shouldUpdate:!1,movingFile:"",isMoving:!1,folderModal:!1,folderName:"Nueva Carpeta"},wa=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},Ca=function(e){var a=e.movingFile,t=e.className,n=e.move,o=e.cancel,i=e.theme,l=e.isMoving;if(!a)return"";var c=Object(d.a)((function(){return{button:{"& .MuiButton-endIcon, & .MuiButton-startIcon":{marginTop:"-5px"}},typo:{color:i?"#fff":"rgba(0, 0, 0, 0.87)"}}}))(),s=a.name,u=a.ext,m=s.length>30?s.substring(0,27).trim()+"..."+u:s;return r.a.createElement("div",{className:t},r.a.createElement(x.a,{variant:"h6",className:c.typo},"Moviendo: ",m),r.a.createElement("div",null,r.a.createElement(be.a,{disableElevation:!0,disabled:l,onClick:function(){return o()},size:"large",startIcon:r.a.createElement(va.a,null),className:c.button},"Cancelar"),r.a.createElement(be.a,{disableElevation:!0,disabled:l,onClick:function(){return n()},size:"large",endIcon:r.a.createElement(ha.a,null),className:c.button},"Mover aqu\xed")))},ka=function(){var e=Ea(),a=Object(f.g)(),t=r.a.useReducer(wa,xa),o=Object(ge.a)(t,2),i=o[0],l=o[1],c=Object(n.useContext)(Ae),s=c.state,u=c.dispatch;r.a.useEffect((function(){if(i.shouldUpdate)l({shouldUpdate:!1,files:null});else{var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};fetch("/api/files/".concat(s.folder,"/files"),e).then(le).then((function(e){l({files:ja(e)})})).catch((function(e){l({open:!0,message:e.message,severity:"error"})}))}}),[s.folder,i.shouldUpdate]);var m=function(e){return u({type:"moveForward",payload:e})},d=function(e){u({type:"update",payload:{playing:e}}),a.push("/reproductor")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";l({fileForModal:e})},g=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||a?e&&E(Object(fe.a)(Object(fe.a)({},e),{},{folder:s.folder})):l({uploadModal:!0}),a&&l({uploadModal:!1})},h=function(e,a){"clickaway"!==a&&l({open:!1,folderModal:!1,folderName:"Nueva carpeta"})},b=function(e){l({shouldUpdate:!0,open:!0,folderModal:!1,folderName:"Nueva carpeta",message:e,severity:"success"})},v=function(e){return l({open:!0,message:e.message})},E=function(e){!function(e,a,t){if(e.fileField&&!isNaN(e.folder)){var n=new FormData;n.append("file",e.fileField),n.append("name",e.fileFieldName),fetch("/api/files/".concat(e.folder),{method:"POST",headers:{Authorization:localStorage.getItem("token")},enctype:"multipart/form-data",body:n}).then(le).then(a("Archivo subido satisfactoriamente!")).catch(t)}}(e,b,v)},y=function(e){l({movingFile:e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:function(){var a=e.main;return i.movingFile&&(a+=" ".concat(e.anotherRow)),s.theme||(a+=" ".concat(e.peachColor)),a}(),component:"main"},r.a.createElement(he.a,{component:"div",color:"secondary",className:e.bar},r.a.createElement(we.a,{variant:"dense"},r.a.createElement(ve.a,{container:!0,alignItems:"center"},r.a.createElement(ve.a,{className:e.sectionMobile,container:!0,item:!0,xs:12,sm:3,md:2,lg:2},r.a.createElement(ve.a,{item:!0,xs:!0,sm:3},r.a.createElement(Ee.a,{edge:"start",onClick:function(){return s.history.length&&u({type:"moveBack"})},color:"inherit","aria-label":"menu"},r.a.createElement(ke.a,null))),r.a.createElement(ve.a,{item:!0,xs:!0,sm:3},r.a.createElement(Ee.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return l({shouldUpdate:!0})}},r.a.createElement(Oe.a,null))),r.a.createElement(ve.a,{item:!0,xs:!0,sm:3},r.a.createElement(Ee.a,{edge:"start",onClick:function(){return u({type:"moveHome"})},color:"inherit","aria-label":"menu"},r.a.createElement(Me.a,null))),r.a.createElement(ve.a,{item:!0,xs:!0,sm:3},r.a.createElement(Ee.a,{edge:"start",onClick:function(){return l({folderModal:!0})},color:"inherit","aria-label":"menu"},r.a.createElement(Re.a,null))),r.a.createElement(ve.a,{item:!0,xs:!0,className:e.hideOnBig},r.a.createElement(Ee.a,{edge:"start",onClick:function(){return g()},color:"inherit","aria-label":"upload"},r.a.createElement(Te.a,null)))),r.a.createElement(ve.a,{item:!0,className:e.sectionDesktop,sm:7,md:7,lg:9},r.a.createElement(C.a,{display:"flex"},r.a.createElement(x.a,{variant:"h6",className:e.title},"Puedes acceder desde ",window.location.origin))),r.a.createElement(ve.a,{item:!0,className:e.sectionDesktop,sm:2,md:2,lg:1,style:{textAlign:"end"}},r.a.createElement(be.a,{color:"inherit",startIcon:r.a.createElement(Te.a,null),component:"span",onClick:function(){return g()}},"Subir"))))),r.a.createElement(ve.a,{container:!0,className:e.inline},!i.files||i.shouldUpdate?r.a.createElement(ye.a,null):"",r.a.createElement("div",{className:e.container},i.files?function(){var e=new RegExp(s.search,"gi");return i.files.reduce((function(a,t,n){if(!t.name.match(e))return a;var o=r.a.createElement(Ye,{openModal:p,useTheme:s.theme,updatePlayer:d,updateFolder:m,move:{setMovingFile:y,movingFile:i.movingFile},key:n,file:t});return[].concat(Object(pe.a)(a),[o])}),[])}():"")),r.a.createElement(Ca,{movingFile:i.movingFile,className:e.movingBar,move:function(){var e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};l({isMoving:!0}),fetch("/api/files/".concat(s.folder,"/").concat(i.movingFile.ino),e).then(le).then((function(e){l({shouldUpdate:!0,movingFile:"",open:!0,message:e.message,severity:"success",isMoving:!1})})).catch((function(e){l({open:!0,movingFile:"",message:e.message,severity:"error",isMoving:!1})}))},cancel:function(){l({movingFile:null})},theme:s.theme,isMoving:i.isMoving})),r.a.createElement(ea.a,{open:i.folderModal,className:e.modal,onClose:function(){return h(0,!0)}},r.a.createElement(_e.a,{className:e.paperMod},r.a.createElement(ve.a,{item:!0,container:!0,xs:12,justify:"center"},r.a.createElement(ve.a,{item:!0},r.a.createElement("img",{src:ce(!1),width:"164",height:"164",alt:"file"})),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{fullWidth:!0,value:i.folderName,variant:"outlined",style:{textAlign:"center"},onChange:function(e){var a=new RegExp("^[\\w\\s\\-]*$","i");e.target.value.match(a)&&l({folderName:e.target.value})}})),r.a.createElement(ve.a,{item:!0,xs:12,style:{paddingTop:"15px"}},r.a.createElement(be.a,{variant:"contained",color:"primary",onClick:function(){return function(e,a,t,n){e&&fetch("/api/files/".concat(a,"/folder"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},enctype:"application/json",body:JSON.stringify({name:e})}).then(le).then(t("Carpeta creada con exito!")).catch(n)}(i.folderName,s.folder,b,v)}},"Aceptar"))))),r.a.createElement(ta,{open:!!i.fileForModal,file:i.fileForModal,handleClose:p}),r.a.createElement(ga,{open:i.uploadModal,handleClose:g}),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:i.open,onClose:h,autoHideDuration:3e3},r.a.createElement(ya,{onClose:h,severity:i.severity},i.message)))},ja=function(e){return e.sort(Oa),e.sort(Sa),e},Oa=function(e,a){return e.name.localeCompare(a.name)},Sa=function(e,a){return e.ext.localeCompare(a.ext)},Ta=t(677),Na=t(73),Ma=t.n(Na),Ia=t(101),Ra=t.n(Ia),Fa=Object(d.a)((function(e){var a;return{main:(a={gridColumnStart:"1",gridColumnEnd:"3",gridRowStart:"1",gridRowEnd:"3",display:"flex",placeContent:"center",alignItems:"center",backgroundImage:"url(".concat(ue.a,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?"#cecece":e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},Object(b.a)(a,e.breakpoints.down("xs"),{gridColumnStart:"1",gridColumnEnd:"2",gridRowStart:"1",gridRowEnd:"4","& .MuiCard-root":{maxWidth:"calc(100vw - 30px)",padding:"1rem"}}),Object(b.a)(a,"& button",{padding:"0.5rem 1rem",fontWeight:"600",margin:"0.25rem 0px","&.Mui-disabled":{color:"rgba(0, 0, 0, 0.26)"}}),Object(b.a)(a,"& .MuiIconButton-root",{padding:0}),Object(b.a)(a,"& .forgot",{width:"100%",textAlign:"center",color:"rgba(0,0,0,0.7)",marginTop:"0.5rem",display:"inline-block"}),a),box:{padding:"1rem 3rem",backgroundColor:"#fff",borderRadius:"1rem",maxWidth:"400px"},form:{marginTop:"0.5rem",display:"flex",flexDirection:"column",alignItems:"center"}}})),Pa={username:new RegExp("^[A-Z0-9]*$","i")},Aa=function(e){return r.a.createElement(Fe.a,Object.assign({elevation:6,variant:"filled"},e))},Wa={open:!1,message:"",username:"",password:"",isLoading:!1,severity:"success"},Da=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},La=function(){var e=Object(f.g)(),a=Fa();r.a.useEffect((function(){return localStorage.clear()}),[]);var t=Object(n.useReducer)(Da,Wa),o=Object(ge.a)(t,2),i=o[0],l=o[1],c=Object(n.useContext)(Ae).dispatch,s=function(){var e=i.username,a=i.password;return e.length<3||a.length<6},u=function(e,a){"clickaway"!==a&&l({open:!1})},m=function(e){var a=e.target;Pa[a.id]&&!a.value.trim().match(Pa[a.id])||l(Object(b.a)({},a.id,a.value.trim()))};return r.a.createElement(C.a,{component:"main",className:a.main},r.a.createElement(E.a,{className:a.box},r.a.createElement(y.a,{className:"center"},r.a.createElement(C.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(Ee.a,null,r.a.createElement(Ra.a,{color:"primary",style:{fontSize:"4rem"}})),r.a.createElement(x.a,{color:"secondary",component:"h2",variant:"h4"},"Cloudster"),r.a.createElement(x.a,{component:"h6",variant:"h6"},"Inicia Sesi\xf3n")),r.a.createElement(Ta.a,null),r.a.createElement("form",{className:a.form,autoComplete:"off",onSubmit:function(a){if(a.preventDefault(),!s()){var t=i.username,n=i.password;l({isLoading:!0}),fetch("/api/users/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:t,password:Ma()(n)})}).then(le).then((function(a){localStorage.setItem("token","bearer "+a.token),c({type:"login",payload:{user:a.user}}),l({open:!0,message:"Inicio de sesi\xf3n exitoso!",severity:"success"}),setTimeout((function(){return e.push("/busqueda")}),500)})).catch((function(e){l({open:!0,message:e.message,isLoading:!1,severity:"error"})}))}}},r.a.createElement(C.a,null,r.a.createElement(na.a,{value:i.username,onChange:m,id:"username",label:"Nombre de usuario",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,disabled:i.isLoading}),r.a.createElement(na.a,{value:i.password,onChange:m,id:"password",label:"Contrase\xf1a",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",disabled:i.isLoading})),r.a.createElement(be.a,{disabled:i.isLoading||s(),fullWidth:!0,variant:"contained",color:"primary",size:"large",type:"submit"},"Iniciar Sesi\xf3n"),r.a.createElement(v.a,{to:"/register",style:{width:"100%"},component:ie},r.a.createElement(be.a,{fullWidth:!0,variant:"outlined",size:"large",color:"secondary",type:"button"},"Registrarse")),r.a.createElement(v.a,{component:ie,to:"/recover",className:"forgot"},"Olvid\xe9 mi contrase\xf1a")))),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:i.open,onClose:u,autoHideDuration:6e3},r.a.createElement(Aa,{onClose:u,severity:i.severity},i.message)))},za=t(678),Ba=t(701),qa=t(707),Ua=Object(d.a)((function(e){var a;return{main:(a={gridColumnStart:"1",gridColumnEnd:"3",gridRowStart:"1",gridRowEnd:"3",display:"flex",placeContent:"center",alignItems:"center",flexDirection:"column",maxWidth:"auto",backgroundImage:"url(".concat(ue.a,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?"#cecece":e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},Object(b.a)(a,e.breakpoints.down("xs"),{gridColumnStart:"1",gridColumnEnd:"2",gridRowStart:"1",gridRowEnd:"4","& .MuiCard-root":{maxWidth:"calc(100vw - 30px)",padding:"1rem"}}),Object(b.a)(a,"& .MuiIconButton-root",{padding:0}),a),box:{padding:"1rem 3rem",backgroundColor:"#fff",borderRadius:"1rem",maxWidth:"100%"},form:{margin:"0",display:"flex",flexDirection:"column",alignItems:"center"},backButton:{color:"rgba(0, 0, 0, 0.8)",borderColor:"rgba(0, 0, 0, 0.8)"},bottonContainer:{marginTop:"1rem",display:"flex",placeContent:"space-between","& button":{padding:"0.5rem 1rem",fontWeight:"600","&.MuiButton-containedPrimary":{color:"#fff"},"&.Mui-disabled":{color:"rgba(0, 0, 0, 0.26)"}}},instructions:{width:"275px"},mRight:{flexGrow:1}}})),Ha=function(e){return r.a.createElement(Fe.a,Object.assign({elevation:6,variant:"filled"},e))},Ga={activeStep:0,touched:!1,isLoading:!1,user:"",id:"",pregunta1:"",pregunta2:"",respuesta1:"",respuesta2:"",password:"",password2:"",open:!1,message:"",severity:"success"},$a=function(e,a){if(a)return Object(fe.a)(Object(fe.a)({},e),a);switch(e.activeStep){case 2:return Object(fe.a)(Object(fe.a)({},e),{},{password:"",password2:"",touched:!0,activeStep:1});case 1:return Object(fe.a)(Object(fe.a)({},e),{},{pregunta1:"",pregunta2:"",respuesta1:"",respuesta2:"",touched:!0,activeStep:0});default:return Ga}},Ja=Object(f.i)((function(){var e=Ua(),a=["Usuario","Preguntas","Contrase\xf1a"],t=Object(f.g)(),o=Object(n.useReducer)($a,Ga),i=Object(ge.a)(o,2),l=i[0],c=i[1],s=Object(n.useContext)(Ae).dispatch,u=function(){if(!l.touched||l.isLoading)return!0;switch(l.activeStep){case 0:return!l.user.length;case 1:var e=l.respuesta1,a=l.respuesta2;return!e.trim().length||!a.trim().length;case 2:var t=l.password,n=l.password2;return t.length<6||n.length<6||t!==n}},m=function(e,a){"clickaway"!==a&&c({open:!1})},d=function(e){var a;return c((a={},Object(b.a)(a,e.target.name,e.target.value),Object(b.a)(a,"touched",!0),a))},p=function(e){var a;return c((a={},Object(b.a)(a,e.target.name,e.target.value.trim()),Object(b.a)(a,"touched",!0),a))};return r.a.createElement(C.a,{component:"main",className:e.main},r.a.createElement(E.a,{className:e.box},r.a.createElement(y.a,null,r.a.createElement(C.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(v.a,{to:"/",component:ie},r.a.createElement(Ee.a,null,r.a.createElement(Ra.a,{color:"primary",style:{fontSize:"4rem"}}))),r.a.createElement(x.a,{color:"secondary",component:"h2",variant:"h4"},"Cloudster"),r.a.createElement(x.a,{component:"h6",variant:"h6"},"Recuperar contrase\xf1a")),r.a.createElement(qa.a,{activeStep:l.activeStep,style:{padding:"0px 0px 24px"},alternativeLabel:!0},a.map((function(e){return r.a.createElement(za.a,{key:e},r.a.createElement(Ba.a,null,e))}))),r.a.createElement(Ta.a,null),r.a.createElement("form",{autoComplete:"off",className:e.form,onSubmit:function(e){if(e.preventDefault(),!u())switch(l.activeStep){case 2:!function(){c({isLoading:!0});var e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({password:Ma()(l.password)})};fetch("/api/users/".concat(l.id_usuario),e).then(le).then((function(e){s({type:"login",payload:{user:e.user}}),localStorage.setItem("token","bearer "+e.token),t.push("/busqueda")})).catch((function(e){c({open:!0,message:e.message,severity:"error",touched:!1,isLoading:!1})}))}();break;case 1:!function(){c({isLoading:!0});var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({respuesta1:l.respuesta1,respuesta2:l.respuesta2})};fetch("/api/users/".concat(l.id_usuario,"/questions"),e).then(le).then((function(e){localStorage.setItem("token","bearer "+e.token),c({activeStep:2,touched:!1,isLoading:!1})})).catch((function(e){c({open:!0,message:e.message,severity:"error",touched:!1,isLoading:!1})}))}();break;default:c({isLoading:!0}),fetch("/api/users/".concat(l.user,"/questions")).then(le).then((function(e){var a=e.usuario,t=e.id_usuario,n=e.pregunta1,r=e.pregunta2;c({user:a.trim(),id_usuario:t.trim(),pregunta1:n,pregunta2:r,activeStep:1,touched:!1,isLoading:!1})})).catch((function(e){c({open:!0,message:e.message,severity:"error",touched:!1,isLoading:!1})}))}}},r.a.createElement("div",{className:e.instructions},function(e){switch(e){case 0:return r.a.createElement(na.a,{name:"user",value:l.user,onChange:p,id:"standard-name",label:"Nombre de usuario",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0});case 1:return r.a.createElement(C.a,null,r.a.createElement(na.a,{name:"respuesta1",value:l.respuesta1,onChange:d,id:"respuesta1",label:"Respuesta #1",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,helperText:l.pregunta1}),r.a.createElement(na.a,{name:"respuesta2",value:l.respuesta2,onChange:d,id:"respuesta2",label:"Respuesta #2",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,helperText:l.pregunta2}));case 2:return r.a.createElement(C.a,null,r.a.createElement(na.a,{name:"password",value:l.password,onChange:p,id:"password-input",label:"Nueva contrase\xf1a",type:"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0}),r.a.createElement(na.a,{name:"password2",value:l.password2,onChange:p,id:"password-confirm-input",label:"Confirmar contrase\xf1a",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,required:!0}));default:return r.a.createElement("p",null,"Unknown step")}}(l.activeStep)),r.a.createElement(C.a,{width:1,className:e.bottonContainer},r.a.createElement(be.a,{disabled:!l.activeStep||l.isLoading,onClick:function(){return c()},className:e.backButton,type:"button",variant:"outlined"},"Volver"),r.a.createElement(be.a,{variant:"contained",color:"primary",disabled:u(),type:"submit"},l.activeStep===a.length-1?"Aceptar":"Siguiente"))),r.a.createElement(Ta.a,{style:{margin:"0.5rem 0"}}),r.a.createElement(ve.a,{container:!0,justify:"space-between"},r.a.createElement(ve.a,{item:!0},r.a.createElement(v.a,{component:ie,to:"/login"},"Inicias sesi\xf3n")),r.a.createElement(ve.a,{item:!0},r.a.createElement(v.a,{component:ie,to:"/register",color:"secondary"},"Registrarse"))))),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:l.open,onClose:m,autoHideDuration:6e3},r.a.createElement(Ha,{onClose:m,severity:l.severity},l.message)))})),_a=t(708),Za=t(683),Va=t(175),Ka=t(684),Xa=t(620),Ya=t(621),Qa=t(680),et=t(682),at=t(168),tt=t.n(at),nt=t(709),rt=t(679),ot=t(332),it=t.n(ot),lt=t(169),ct=t.n(lt),st=t(333),ut=t.n(st),mt=t(43),dt=Object(d.a)((function(e){var a;return{avatar:{backgroundColor:Va.a[500]},main:{overflow:"auto",height:"100%","& .card-box":{minWidth:300,maxWidth:480,width:"100%",padding:"0 10px",textAlign:"center","& .MuiCardHeader-root":{textAlign:"center"},"& .MuiCard-root":(a={minWidth:300,maxWidth:480,margin:"1rem",width:"100%",height:"min-content"},Object(b.a)(a,e.breakpoints.down("sm"),{maxWidth:"calc(100vw - 1rem)"}),Object(b.a)(a,"& .MuiCardContent-root:last-child",{paddingBottom:16}),a),"& .center":{display:"flex",justifyContent:"center"},"& .MuiButton-containedPrimary":{boxShadow:"none",marginRight:10}}},card:{minWidth:300,maxWidth:500,margin:5},list:{overflow:"auto",maxHeight:300},dark:{backgroundColor:"#393d46",color:"#fff","& .files":{color:"#4caf50"},"& .MuiButton-containedPrimary":{border:"1px solid #fff"}},dim:{backgroundColor:"#fff9c4",color:"white","& .files":{color:"#4caf50"},"& .MuiButton-containedPrimary":{color:"#fff"}}}})),pt={files:[],shouldUpdate:!1,totalSize:0,parsedSize:"",chartData:[]},gt=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},ft=function(e){var a=e.data,t=e.matches;if(!a.length)return r.a.createElement("div",null);var n=a.reduce((function(e,a){return e+a.value}),0),o=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement(y.a,null,r.a.createElement(mt.e,{width:t?400:300,height:300,style:{fontFamily:"sans-serif"}},r.a.createElement(mt.d,{data:a,cx:"50%",cy:"50%",label:!0,innerRadius:"68.9656%",outerRadius:"80%",fill:"#8884d8",paddingAngle:3,dataKey:"value",isAnimationActive:!1},r.a.createElement(mt.b,{value:n,style:{fontSize:"1.5rem"},offset:0,position:"center"}),a.map((function(e,a){return r.a.createElement(mt.a,{key:"cell-".concat(a),fill:o[a%o.length]})}))),r.a.createElement(mt.c,{layout:t?"vertical":"horizontal",verticalAlign:t?"middle":"bottom",align:t?"left":"center"})))},ht=function(e){return e.sort(bt),e.sort(vt),e},bt=function(e,a){return e.name.localeCompare(a.name)},vt=function(e,a){return e.ino-a.ino},Et=function(){var e=dt(),a=Object(rt.a)((function(e){return e.breakpoints.up("sm")})),t=Object(n.useContext)(Ae),o=t.state,i=o.user,l=o.theme,c=t.dispatch,s=r.a.useReducer(gt,pt),u=Object(ge.a)(s,2),m=u[0],d=u[1];r.a.useEffect((function(){fetch("/api/users/".concat(i.id,"/files"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(le).then((function(e){return d(Object(fe.a)(Object(fe.a)({},e),{},{files:ht(e.files)}))})).catch((function(){}))}),[i.id,m.shouldUpdate]);return r.a.createElement(ve.a,{className:function(){var a="".concat(e.main," ");return a+=l?e.dark:e.dim}(),container:!0,justify:"center"},r.a.createElement(ve.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap",className:"card-box"},r.a.createElement(E.a,{raised:!1},r.a.createElement(Za.a,{title:"Perfil"}),r.a.createElement(Ta.a,null),r.a.createElement(y.a,null,r.a.createElement(x.a,{variant:"h3"},i.usuario),r.a.createElement(C.a,{m:.5},r.a.createElement(C.a,{display:"flex",justifyContent:"center"},r.a.createElement(_a.a,{className:e.avatar},i.nivel)),r.a.createElement(x.a,{color:"textSecondary"},"Nivel de jerarqu\xeda")),r.a.createElement(Ta.a,null),r.a.createElement(C.a,{m:.5},r.a.createElement(x.a,null,i.nombre," ",i.apellido),r.a.createElement(x.a,null,"Miembro desde: ",i.desde)),r.a.createElement(Ta.a,null),r.a.createElement(C.a,{m:.5},r.a.createElement(x.a,null,"Espacio en el servidor: ",m.parsedSize),r.a.createElement(x.a,null,"Total de archivos subidos: ",m.files.length)),r.a.createElement(Ta.a,null)),r.a.createElement(w.a,null,r.a.createElement(C.a,{mx:"auto"},r.a.createElement(v.a,{component:ie,to:"/configuracion",underline:"none"},r.a.createElement(be.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(ut.a,null)},"Configuraci\xf3n")),r.a.createElement(Ka.a,{control:r.a.createElement(nt.a,{checked:l,onChange:function(e){var a=e.target;c({type:"update",payload:{theme:a.checked}})},value:"theme",color:l?"default":"primary",inputProps:{"aria-label":"primary checkbox"}}),label:"Cambiar tema"}))))),m.files.length?r.a.createElement(ve.a,{item:!0,container:!0,xs:!0,className:"card-box"},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(E.a,{raised:!1},r.a.createElement(Za.a,{title:"Archivos Subidos"}),r.a.createElement(Ta.a,null),r.a.createElement(y.a,null,r.a.createElement(Xa.a,{className:e.list,dense:!0},m.files.map((function(e,a){return r.a.createElement(Ya.a,{key:a},r.a.createElement(Qa.a,null,r.a.createElement(tt.a,{component:e.ext?it.a:ct.a})),r.a.createElement(et.a,{primary:e.name,secondary:null}))})))))),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(E.a,{raised:!1},r.a.createElement(Za.a,{title:"Tipos de Archivos"}),r.a.createElement(Ta.a,null),r.a.createElement(ft,{matches:a,data:m.chartData})))):"")},yt=t(687),xt=t(703),wt=t(686),Ct=t(685),kt=t(5),jt=t(688),Ot=t(698),St=t(177),Tt=t.n(St),Nt=t(171),Mt=t.n(Nt),It=Object(d.a)((function(e){var a;return{paperMod:(a={padding:"0px 1.5rem 1rem",margin:"auto",minWidth:"340px"},Object(b.a)(a,e.breakpoints.down("xs"),{minWidth:"100%"}),Object(b.a)(a,"& p",{color:"red","&:empty":{height:"16px"}}),Object(b.a)(a,"& .MuiFormControl-root",{height:"80px"}),a)}})),Rt={touched:!1,touched2:!1,password:"",password2:"",error:"",error2:""},Ft=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},Pt=function(e){var a=e.user,t=e.handleClose,n=It(),o=r.a.useReducer(Ft,Rt),i=Object(ge.a)(o,2),l=i[0],c=i[1];if(!a)return"";var s=function(e){var a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=u(t,e.target.value.trim()),r=(a={},Object(b.a)(a,e.target.name,e.target.value.trim()),Object(b.a)(a,"touched".concat(t),!0),Object(b.a)(a,"error".concat(t),n),a);t||(r.error2=u("2",l.password2,e.target.value.trim())),c(r)},u=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.password,n=l["touched".concat(e)],r=a;if(!n)return"";switch(!0){case r.length<6:return"La contrase\xf1a debe de al menos 6 caracteres";case e&&t!==r:return"La contrase\xf1as deben coincidir";default:return""}};return r.a.createElement(ea.a,{open:!0,onClose:function(){return t()}},r.a.createElement(Qe.a,{id:"file-dialog-title",style:{textAlign:"center"}},"Cambiar contrase\xf1a a ",a.usuario),r.a.createElement(C.a,{className:n.paperMod},r.a.createElement("form",{autoComplete:"off",className:n.form,onSubmit:function(e){e.preventDefault(),t({index:a.index,password:Ma()(l.password),userID:a.id})}},r.a.createElement(ve.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(na.a,{name:"password",value:l.password,onChange:s,id:"password-input",label:"Nueva contrase\xf1a",type:"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,error:!!l.error,helperText:l.error}),r.a.createElement(na.a,{name:"password2",value:l.password2,onChange:function(e){return s(e,"2")},id:"password-confirm-input",label:"Confirmar contrase\xf1a",type:"password",variant:"outlined",margin:"normal",fullWidth:!0,required:!0,error:!!l.error2,helperText:l.error2}),r.a.createElement(be.a,{variant:"contained",color:"primary",disabled:function(){var e=l.password,a=l.password2,t=l.error,n=l.error2;return Boolean(t||n)||!e.length||!a.length}(),type:"submit"},"Cambiar contrase\xf1a")))))},At=Object(d.a)((function(e){return{main:Object(b.a)({width:"100%",display:"flex",alignItems:" center",justifyContent:"center","& form":{padding:20,width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between","& .buttons-container":{display:"flex",justifyContent:"flex-end",padding:10}},"& .MuiFormControl-root":{margin:"0.5rem 0"}},e.breakpoints.down("xs"),{alignItems:"flex-start",height:"100%",overflow:"auto","& .MuiContainer-root":{display:"none"}}),root:{"& .MuiTab-wrapper":{justifyContent:"flex-start",flexDirection:"row"},flexGrow:1,height:400,display:"flex"},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},sectionMobile:Object(b.a)({display:"block",marginTop:"1rem",maxWidth:"calc(100vw - 2rem)",width:"calc(100vw - 2rem)",height:400,"& .MuiAccordionDetails-root":{minHeight:250,"& #vertical-tabpanel-1":{width:"100%","& > *":{display:"flex",alignItems:"center",height:"100%"}},"& #vertical-tabpanel-2":{width:"100%",maxWidth:"100%"}}},e.breakpoints.up("sm"),{display:"none"})}}));function Wt(e){return r.a.createElement(Fe.a,Object.assign({elevation:6,variant:"filled"},e))}var Dt={nombre:new RegExp("^[A-Z'\\s]*$","i"),apellido:new RegExp("^[A-Z'\\s]*$","i"),respuesta1:new RegExp("^[A-Z'0-9\\s]*$","i"),respuesta2:new RegExp("^[A-Z'0-9\\s]*$","i")},Lt=Object(kt.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(xt.a),zt=Object(kt.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(Ct.a),Bt=Object(kt.a)((function(e){return{root:{padding:e.spacing(2)}}}))(wt.a),qt=[{id:"1",pregunta:"\xbfCu\xe1l es el nombre de tu mejor amigo?"},{id:"2",pregunta:"\xbfCu\xe1l es la ciudad donde naciste?"},{id:"3",pregunta:"\xbfC\xf3mo se llamaba tu primera mascota?"},{id:"4",pregunta:"\xbfCu\xe1l es tu color favorito?"},{id:"5",pregunta:"\xbfCu\xe1l es el segundo nombre de tu madre?"}],Ut=function(e){var a=e.children,t=e.value,n=e.index,o=Object(Ue.a)(e,["children","value","index"]);return r.a.createElement(x.a,Object.assign({component:"div",role:"tabpanel",hidden:!o&t!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},o),t===n&&r.a.createElement(C.a,null,a))},Ht={open:!1,value:0,message:"",nombre:"",apellido:"",changePassword:!1,pregunta1:1,pregunta2:2,respuesta1:"",respuesta2:"",isLoading:!1},Gt=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},$t=function(){var e=At(),a=r.a.useContext(Ae),t=a.state.user,n=a.dispatch,o=r.a.useReducer(Gt,Object(fe.a)(Object(fe.a)({},Ht),{},{pregunta1:t.pregunta1,pregunta2:t.pregunta2})),i=Object(ge.a)(o,2),l=i[0],c=i[1],s=function(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}},u=function(e){switch(e){case 0:return JSON.stringify({nombre:l.nombre,apellido:l.apellido});case 2:return JSON.stringify({pregunta1:l.pregunta1,pregunta2:l.pregunta2,respuesta1:l.respuesta1,respuesta2:l.respuesta2});default:return""}},m=function(){switch(l.value){case 2:var e=l.pregunta1,a=l.pregunta2,t=l.respuesta1,n=l.respuesta2;return t.trim().length<3||n.trim().length<3||e===a;case 0:return l.nombre.trim().length<2||l.apellido.trim().length<2;default:return!0}},d=function(e){if(e.preventDefault(),!m()&&1!==l.value){c({isLoading:!0});var a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:u(l.value)};fetch("/api/users/".concat(t.id),a).then(le).then((function(e){localStorage.setItem("token","bearer "+e.token),n({type:"update",payload:{user:e.user}}),c(Object(fe.a)(Object(fe.a)({},Ht),{},{value:l.value,pregunta1:e.user.pregunta1,pregunta2:e.user.pregunta2,open:!0,isLoading:!1,severity:"success",message:"Cambios guardados satisfactoriamente!"}))})).catch((function(e){c({open:!0,message:e.message,severity:"success",isLoading:!1})}))}},p=function(e){var a=e.target;Dt[a.name]&&!a.value.trim().match(Dt[a.name])||c(Object(b.a)({},a.name,a.value))},g=function(){c({changePassword:t})},f=qt.map((function(e,a){return r.a.createElement($e.a,{key:a,value:e.id}," ",e.pregunta," ")})),h=function(e,a){c({value:a})},v=function(e,a){"clickaway"!==a&&c({open:!1})},E=function(e){switch(e){case 2:return r.a.createElement(ve.a,{container:!0},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{select:!0,onChange:p,value:l.pregunta1,name:"pregunta1",required:!0,label:"Primera pregunta",variant:"outlined",fullWidth:!0,margin:"normal"},f)),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{onChange:p,value:l.respuesta1,name:"respuesta1",required:!0,label:"Respuesta ",variant:"outlined",fullWidth:!0,margin:"normal"})),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{select:!0,onChange:p,value:l.pregunta2,name:"pregunta2",required:!0,label:"Segunda pregunta",variant:"outlined",fullWidth:!0,margin:"normal"},f)),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{onChange:p,value:l.respuesta2,name:"respuesta2",required:!0,label:"Respuesta ",variant:"outlined",fullWidth:!0,margin:"normal"})));case 1:return r.a.createElement(ve.a,{container:!0,direction:"row",align:"center",justify:"center"},r.a.createElement(be.a,{variant:"contained",color:"primary",type:"button",onClick:g,startIcon:r.a.createElement(Mt.a,null)},"Cambiar contrase\xf1a"));default:return r.a.createElement(ve.a,{container:!0},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{onChange:function(e){return p(e)},value:l.nombre,required:!0,name:"nombre",label:"Nombre (".concat(t.nombre,")"),variant:"outlined",fullWidth:!0,helperText:"El nombre debe contener al menos 2 catacteres",margin:"normal"})),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(na.a,{onChange:function(e){return p(e)},value:l.apellido,name:"apellido",required:!0,label:"Apellido (".concat(t.apellido,")"),helperText:"El apellido debe contener al menos 2 catacteres",variant:"outlined",fullWidth:!0,margin:"normal"})))}},y=r.a.createElement(r.a.Fragment,null,[0,1,2].map((function(e){return r.a.createElement(Ut,{key:"panel-".concat(e),value:l.value,index:e},E(e))})));return r.a.createElement(C.a,{component:"main",className:e.main},r.a.createElement(yt.a,{maxWidth:"md"},r.a.createElement(_e.a,{className:e.root},r.a.createElement(Ot.a,{orientation:"vertical",variant:"fullWidth",value:l.value,indicatorColor:"primary",onChange:h,"aria-label":"Configuracion de perfil",className:e.tabs},r.a.createElement(jt.a,Object.assign({label:"Perfil"},s(0))),r.a.createElement(jt.a,Object.assign({label:"Contrase\xf1a"},s(1))),r.a.createElement(jt.a,Object.assign({label:"Preguntas Secretas"},s(2)))),r.a.createElement("form",{autoComplete:"off",onSubmit:d},y,1!==l.value&&r.a.createElement(C.a,{className:"buttons-container"},r.a.createElement(be.a,{disabled:m(),variant:"contained",color:"primary",type:"submit",className:e.button}," ","Guardar"))))),r.a.createElement(C.a,{className:e.sectionMobile},r.a.createElement(Lt,{square:!0,id:"panel2",expanded:!l.value,onChange:function(){return h(0,0)}},r.a.createElement(zt,{expandIcon:r.a.createElement(Tt.a,null),id:"p1d-header"},r.a.createElement(x.a,{className:e.heading},"Perfil")),r.a.createElement(Bt,null,r.a.createElement("form",{onSubmit:d},E(0),r.a.createElement(be.a,{disabled:l.nombre.length<=1&&l.apellido.length<=1,variant:"contained",color:"primary",type:"submit",className:e.button}," ","Guardar")))),r.a.createElement(Lt,{square:!0,id:"panel2",expanded:1===l.value,onChange:function(){return h(0,1)}},r.a.createElement(zt,{expandIcon:r.a.createElement(Tt.a,null),id:"p2d-header"},r.a.createElement(x.a,{className:e.heading},"Contrase\xf1a")),r.a.createElement(Bt,null,E(1))),r.a.createElement(Lt,{square:!0,id:"panel3",expanded:2===l.value,onChange:function(){return h(0,2)}},r.a.createElement(zt,{expandIcon:r.a.createElement(Tt.a,null),id:"p1d-header"},r.a.createElement(x.a,{className:e.heading},"Preguntas secretas")),r.a.createElement(Bt,null,r.a.createElement("form",{onSubmit:d},E(2),r.a.createElement(be.a,{disabled:l.respuesta1.length<2&&l.respuesta2.length<2,variant:"contained",color:"primary",type:"submit",className:e.button}," ","Guardar"))))),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:l.open,autoHideDuration:2e3,onClose:v},r.a.createElement(Wt,{onClose:v,severity:l.severity||"success"},l.message)),r.a.createElement(Pt,{user:l.changePassword,handleClose:function(e){if(e){c({isLoading:!0,changePassword:null});var a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({password:e.password})};fetch("/api/users/".concat(e.userID),a).then(le).then((function(){c({isLoading:!1,open:!0,message:"Contrase\xf1a cambiada",severity:"success"})})).catch((function(e){c({isLoading:!1,open:!0,message:e.message,severity:"error"})}))}else c({changePassword:null})}}))},Jt=Object(d.a)((function(e){return{main:Object(b.a)({gridColumnStart:"1",gridColumnEnd:"3",gridRowStart:"1",gridRowEnd:"3",display:"flex",placeContent:"center",alignItems:"center",backgroundImage:"url(".concat(ue.a,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?"#cecece":e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center","& .MuiIconButton-root":{padding:0},"& .MuiFormControl-root":{margin:"0.5rem"},"& .MuiGrid-container":{width:"550px"},"& .MuiGrid-item":{padding:"0.5rem"},"& .MuiFormHelperText-root":{margin:"0"},"& .forgot":{width:"100%",textAlign:"center",color:"rgba(0,0,0,0.7)",marginTop:"0.5rem",display:"inline-block"}},e.breakpoints.down("xs"),{gridColumnStart:"1",gridColumnEnd:"2",gridRowStart:"1",gridRowEnd:"4","& .MuiCard-root":{maxWidth:"calc(100vw - 10px)",padding:"1rem"},"& .MuiGrid-container":{width:"275px"},"& .MuiFormControl-root":{margin:"0.5rem 0px"},"& .MuiCardContent-root":{padding:0}}),instructions:{width:"275px"},form:{margin:"0",display:"flex",flexDirection:"column",alignItems:"center"},box:{padding:"1rem 3rem",backgroundColor:"#fff",borderRadius:"1rem",maxWidth:"100%"},bottonContainer:{marginTop:"1rem",display:"flex",placeContent:"space-between","& button":{padding:"0.5rem 1rem",fontWeight:"600","&.MuiButton-containedPrimary":{color:"#fff"},"&.Mui-disabled":{color:"rgba(0, 0, 0, 0.26)"}}}}})),_t={user:new RegExp("^[A-Z0-9]*$","i"),nombre:new RegExp("^[A-Z'\\s]*$","i"),apellido:new RegExp("^[A-Z'\\s]*$","i"),respuesta1:new RegExp("^[A-Z'0-9\\s]*$","i"),respuesta2:new RegExp("^[A-Z'0-9\\s]*$","i")},Zt=function(e){return r.a.createElement(Fe.a,Object.assign({elevation:6,variant:"filled"},e))},Vt={open:!1,message:"",activeStep:0,nombre:"",apellido:"",user:"",userExist:!1,password:"",password2:"",pregunta1:1,pregunta2:2,respuesta1:"",respuesta2:"",questions:[],touched:!1,isLoading:!1,severity:"success"},Kt=function(e,a){if(a)return Object(fe.a)(Object(fe.a)({},e),a);switch(e.activeStep){case 3:return Object(fe.a)(Object(fe.a)({},e),{},{user:"",userExist:!1,touched:!0,activeStep:2});case 2:return Object(fe.a)(Object(fe.a)({},e),{},{pregunta1:1,pregunta2:2,respuesta1:"",respuesta2:"",touched:!0,activeStep:1});case 1:return Object(fe.a)(Object(fe.a)({},e),{},{touched:!0,nombre:"",apellido:"",password:"",password2:"",activeStep:0});default:return Vt}},Xt=function(){var e=Object(f.g)(),a=Jt(),t=Object(n.useReducer)(Kt,Vt),o=Object(ge.a)(t,2),i=o[0],l=o[1],c=function(){if(!i.touched||i.isLoading)return!0;switch(i.activeStep){case 0:var e=i.nombre,a=i.apellido,t=i.password,n=i.password2;return e.trim().length<2||a.trim().length<2||t.length<6||t!==n;case 1:var r=i.pregunta1,o=i.pregunta2,l=i.respuesta1,c=i.respuesta2;return l.trim().length<3||c.trim().length<3||r===o;case 2:return i.user.length<6}},s=function(e,a){"clickaway"!==a&&l({open:!1})},u=["Nombres y Contrase\xf1a","Preguntas Secretas","Nombre de usuario"],m=function(e){var a,t=e.target;_t[t.name]&&!t.value.trim().match(_t[t.name])||l((a={},Object(b.a)(a,t.name,t.value),Object(b.a)(a,"touched",!0),a))},d=function(e){var a,t=e.target;_t[t.name]&&!t.value.trim().match(_t[t.name])||l((a={},Object(b.a)(a,t.name,t.value.replace(/\s+/g,"")),Object(b.a)(a,"userExist","user"!==t.name&&i.userExist),Object(b.a)(a,"touched",!0),a))},p=[{id:"1",pregunta:"Cu\xe1l es el nombre de tu mejor amigo?"},{id:"2",pregunta:"Cu\xe1l es la ciudad donde naciste?"},{id:"3",pregunta:"C\xf3mo se llamaba tu primera mascota?"},{id:"4",pregunta:"Cu\xe1l es tu color favorito?"},{id:"5",pregunta:"Cu\xe1l es el segundo nombre de tu madre?"}].map((function(e){return r.a.createElement($e.a,{key:e.id,value:e.id}," ",e.pregunta," ")}));return r.a.createElement(C.a,{className:a.main,component:"main"},r.a.createElement(E.a,{className:a.box},r.a.createElement(y.a,null,r.a.createElement(C.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(v.a,{to:"/",component:ie},r.a.createElement(Ee.a,null,r.a.createElement(Ra.a,{color:"primary",style:{fontSize:"4rem"}}))),r.a.createElement(x.a,{color:"secondary",component:"h2",variant:"h4"},"Cloudster"),r.a.createElement(x.a,{component:"h6",variant:"h6"},"Recuperar contrase\xf1a")),r.a.createElement(qa.a,{activeStep:i.activeStep,style:{padding:"0px 0px 24px"},alternativeLabel:!0},u.map((function(e){return r.a.createElement(za.a,{key:e},r.a.createElement(Ba.a,null,e))}))),r.a.createElement(Ta.a,null),r.a.createElement("form",{autoComplete:"off",className:a.form,onSubmit:function(a){var t;if(a.preventDefault(),!c())return 2===i.activeStep?(t=i,void([{name:"nombre",required:!0,type:"string",length:2},{name:"apellido",required:!0,type:"string",length:2},{name:"password",required:!0,type:"string",length:6},{name:"user",required:!0,type:"string",length:6},{name:"pregunta1",required:!0,type:"number"},{name:"pregunta2",required:!0,type:"number"},{name:"respuesta1",required:!0,type:"string",length:3},{name:"respuesta2",required:!0,type:"string",length:3}].every((function(e){var a=e.name,n=e.required,r=e.type,o=e.length;return!(n&&!t[a])&&(!r||typeof t[a]===r)&&!(o&&t[a].length<o)}))&&(l({isLoading:!0}),fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:i.nombre.trim(),apellido:i.apellido.trim(),password:Ma()(i.password.replace(/\s+/g,"")),usuario:i.user.replace(/\s+/g,""),pregunta1:i.pregunta1,pregunta2:i.pregunta2,respuesta1:i.respuesta1.trim(),respuesta2:i.respuesta2.trim()})}).then(le).then((function(a){l({open:!0,message:a.message,severity:"success"}),setTimeout((function(){e.push("/login")}),1500)})).catch((function(e){l({activeStep:2,open:!0,userExist:6===e.code,severity:"error",message:e.message,isLoading:!1,touched:!1})}))))):void l({activeStep:i.activeStep+1})}},r.a.createElement(C.a,null,function(e){switch(e){case 0:return r.a.createElement(ve.a,{container:!0},r.a.createElement(ve.a,{item:!0,xs:12,sm:6},r.a.createElement(na.a,{required:!0,onChange:m,name:"nombre",value:i.nombre,id:"nombre",label:"Nombre",variant:"outlined",helperText:"El nombre debe contener al menos 2 catacteres",fullWidth:!0}),r.a.createElement(na.a,{required:!0,onChange:m,name:"apellido",value:i.apellido,id:"apellido",label:"Apellido",variant:"outlined",helperText:"El apellido debe contener al menos 2 catacteres",fullWidth:!0})),r.a.createElement(ve.a,{item:!0,xs:12,sm:6},r.a.createElement(na.a,{required:!0,onChange:d,name:"password",value:i.password,type:"password",id:"password",label:"Contrase\xf1a",variant:"outlined",helperText:"La contrase\xf1a debe contener al menos 6 catacteres",fullWidth:!0}),r.a.createElement(na.a,{required:!0,onChange:d,name:"password2",value:i.password2,type:"password",id:"password2",label:"Confirmar contrase\xf1a",variant:"outlined",fullWidth:!0,error:i.password2.length>2&&i.password!==i.password2,helperText:i.password2.length>2&&i.password!==i.password2?"Las contrase\xf1as no coinciden":" "})));case 1:return r.a.createElement(ve.a,{container:!0},r.a.createElement(ve.a,{item:!0,xs:12,sm:6},r.a.createElement(na.a,{required:!0,id:"outlined-select-currency",select:!0,onChange:m,name:"pregunta1",helperText:i.pregunta1===i.pregunta2?"Las preguntas no pueden ser iguales":"",error:i.pregunta1===i.pregunta2,value:i.pregunta1,label:"Primera pregunta",variant:"outlined",fullWidth:!0},p),r.a.createElement(na.a,{required:!0,onChange:m,name:"respuesta1",value:i.respuesta1,id:"outlined-basic",label:"Respuesta",variant:"outlined",fullWidth:!0})),r.a.createElement(ve.a,{item:!0,xs:12,sm:6},r.a.createElement(na.a,{required:!0,id:"outlined-select-currency",select:!0,label:"Segunda pregunta",onChange:m,name:"pregunta2",helperText:i.pregunta1===i.pregunta2?"Las preguntas no pueden ser iguales":"",error:i.pregunta1===i.pregunta2,value:i.pregunta2,variant:"outlined",fullWidth:!0},p),r.a.createElement(na.a,{required:!0,onChange:m,name:"respuesta2",value:i.respuesta2,id:"outlined-basic",label:"Respuesta",variant:"outlined",fullWidth:!0})));case 2:return r.a.createElement(C.a,{className:a.instructions},r.a.createElement(na.a,{onChange:d,name:"user",disabled:i.isLoading,value:i.user,helperText:i.userExist?"El nombre de usuario ya existe":"Tu usuario debe contener al menos 6 catacteres",error:i.userExist,id:"outlined-basic",label:"Nombre de usuario",variant:"outlined",fullWidth:!0}));default:return"Paso no existente"}}(i.activeStep)),r.a.createElement(C.a,{width:1,className:a.bottonContainer},r.a.createElement(be.a,{disabled:!i.activeStep||i.isLoading,onClick:function(){return l()},className:a.button,type:"button",variant:"outlined"},"Volver"),r.a.createElement(be.a,{variant:"contained",color:"primary",disabled:c(),type:"submit"},i.activeStep===u.length-1?"Aceptar":"Siguiente")),r.a.createElement(v.a,{component:ie,to:"/login",className:"forgot"},"\xbfYa tienes cuenta? \xa1Inicia Sesi\xf3n!")))),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:i.open,autoHideDuration:6e3,onClose:s},r.a.createElement(Zt,{onClose:s,severity:i.severity},i.message)))},Yt=t(334),Qt=Object(d.a)((function(e){return{root:{padding:e.spacing(3,2)},hiden:{display:"none"},toolbar:e.mixins.toolbar}})),en=window.location.origin,an=function(){var e=Qt(),a=Object(n.useContext)(Ae).state.playing;if(a){var t=localStorage.getItem("token")&&localStorage.getItem("token").replace(/[Bb]earer /,"");return r.a.createElement(C.a,{width:1,className:"min-h100"},r.a.createElement("div",{className:"flex-column min-h100"},r.a.createElement("div",{style:{flexGrow:"1",overflow:"auto",width:"100%"}},r.a.createElement(Yt.a,{url:"".concat(en,"/api/files/").concat(a,"/watch?token=").concat(t),height:"100%",width:"100%",allow:"fullscreen",frameBorder:"0"}))))}return r.a.createElement(C.a,{textAlign:"center",bgcolor:"bg.main",display:"flex",width:1,className:"min-h100",justifyContent:"center",alignItems:"center"},r.a.createElement(_e.a,{className:e.root},r.a.createElement(x.a,{variant:"h5",component:"h3"},"A\xfan no hay nada para visualizar!"),r.a.createElement(x.a,{component:"p"},"Te invitamos a seleccionar un archivo en la secci\xf3n de b\xfasqueda.")))},tn=t(710),nn=t(172),rn=t.n(nn),on=t(220),ln=t.n(on),cn=t(335),sn=t.n(cn),un=t(336),mn=t.n(un),dn=["/busqueda","/reproductor","/perfil","/admin"],pn=[ct.a,sn.a,rn.a,mn.a],gn=Object(d.a)((function(e){return{aside:Object(b.a)({"& .MuiDrawer-root":{flexShrink:0},"& .flex":{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%"},"& .Mui-selected":{backgroundColor:"rgba(0,0,0,0.1)",borderLeft:"2px solid "+s.a[500]},"& .MuiListItemIcon-root":{minWidth:"0"},"& .MuiListItem-gutters":{paddingLeft:8,paddingRight:8},"& .hide-on-big":{display:"none"}},e.breakpoints.down("xs"),{gridRowStart:3,"& .flex":{flexDirection:"row"},"& .MuiListItem-gutters":{padding:"0px"},"& .MuiList-root":{display:"flex",padding:"0px",width:"100%"},"& .Mui-selected":{border:"none",borderBottom:"2px solid "+s.a[500]},"& .MuiButtonBase-root":{justifyContent:"center",alignItems:"center"},"& .hide-on-small":{display:"none"},"& .hide-on-big":{display:"flex"}}),dark:{"& .MuiListItemIcon-root":{color:"white"},"& .MuiDrawer-paper":{backgroundColor:"#252525"}}}})),fn=function(){var e=gn(),a=Object(f.h)(),t=r.a.useState(0),n=Object(ge.a)(t,2),o=n[0],i=n[1],l=r.a.useContext(Ae),c=l.state,s=l.dispatch;r.a.useEffect((function(){var e=a.pathname.split("/"),t=Object(ge.a)(e,2)[1],n=dn.indexOf("/".concat(t));i(n)}),[a.pathname]);var u=function(){localStorage.clear(),s({type:"reset"})};return r.a.createElement(C.a,{component:"aside",className:function(){var a="".concat(e.aside," ");return a+=c.theme?e.dark:""}()},r.a.createElement(tn.a,{className:"min-h100",color:"primary.main",variant:"permanent",classes:{paper:"flex position-static"}},r.a.createElement(Xa.a,null,dn.reduce((function(e,a,t){if(3===t&&c.user.nivel<5)return e;var n=r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(Ya.a,{button:!0,component:ie,to:a,selected:o===t},r.a.createElement(Qa.a,null,r.a.createElement(tt.a,{fontSize:"large",component:pn[t]}))),r.a.createElement(Ta.a,{className:"hide-on-small"}));return e.push(n),e}),[]),r.a.createElement(Ya.a,{className:"hide-on-big",button:!0,component:ie,to:"/",onClick:u},r.a.createElement(Qa.a,null,r.a.createElement(ln.a,{fontSize:"large"})))),r.a.createElement(Xa.a,{className:"hide-on-small"},r.a.createElement(Ya.a,{button:!0,component:ie,to:"/",onClick:u},r.a.createElement(Qa.a,null,r.a.createElement(ln.a,{fontSize:"large"}))))))},hn=t(350),bn=t(17),vn=t(339),En=t.n(vn),yn=t(338),xn=t.n(yn),wn=t(337),Cn=t.n(wn),kn=Object(d.a)((function(e){return{grow:{flexGrow:1},appBar:Object(b.a)({zIndex:e.zIndex.drawer+1,position:"static",gridColumnStart:1,gridColumnEnd:3},e.breakpoints.down("xs"),{gridColumnStart:1,gridColumnEnd:2}),menuButton:{marginRight:e.spacing(2)},inputRoot:{color:"inherit"},icon:Object(b.a)({margin:0},e.breakpoints.down("xs"),{marginRight:e.spacing(2)}),title:Object(b.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(b.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(bn.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(bn.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputInput:Object(b.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(b.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"})}})),jn=["busqueda","admin"],On=function(){var e=kn(),a=Object(f.h)(),t=Object(rt.a)((function(e){return e.breakpoints.down("xs")})),o=Object(n.useContext)(Ae),i=o.state,l=i.search,c=i.user,s=c.usuario,u=c.nivel,m=o.dispatch;return r.a.createElement(he.a,{className:e.appBar},r.a.createElement(we.a,null,r.a.createElement(En.a,{className:e.icon}),r.a.createElement(x.a,{className:e.title,variant:"h5"},"Cloudster"),jn.some((function(e){return a.pathname.includes(e)}))?r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(Cn.a,null)),r.a.createElement(hn.a,{placeholder:"Buscar...",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},value:l,onChange:function(e){return m({type:"update",payload:{search:e.target.value}})}})):"",r.a.createElement("div",{className:e.grow}),r.a.createElement(v.a,{component:ie,to:"/Perfil",color:"inherit",underline:"none"},r.a.createElement(C.a,{display:{xs:"none",sm:"flex"}},r.a.createElement(rn.a,null),r.a.createElement(x.a,null,s))),5===u&&a.pathname.includes("admin")&&t?r.a.createElement(Ee.a,{"aria-label":"delete",onClick:function(){return m({type:"update",payload:{mobileOpen:!0}})}},r.a.createElement(xn.a,null)):""))},Sn=Object(d.a)((function(e){var a;return{root:(a={gridColumnStart:"1",gridColumnEnd:"3",gridRowStart:"1",gridRowEnd:"3",backgroundImage:"url(".concat(ue.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},Object(b.a)(a,e.breakpoints.down("xs"),{gridColumnStart:"1",gridColumnEnd:"2",gridRowStart:"1",gridRowEnd:"4"}),Object(b.a)(a,"& .MuiPaper-root",{padding:e.spacing(3,2)}),a)}})),Tn=function(){var e=Sn();return r.a.createElement(C.a,{textAlign:"center",display:"flex",width:1,justifyContent:"center",alignItems:"center",className:e.root},r.a.createElement(_e.a,null,r.a.createElement(x.a,{variant:"h5",component:"h3"},"Lo sentimos!"),r.a.createElement(x.a,{component:"p"},"La p\xe1gina que est\xe1s buscando no existe.")))},Nn=t(23),Mn=t(702),In=t(697),Rn=t(696),Fn=t(340),Pn=t.n(Fn),An=t(342),Wn=t.n(An),Dn=t(341),Ln=t.n(Dn),zn=t(343),Bn=t.n(zn),qn=t(344),Un=t.n(qn),Hn=t(345),Gn=t.n(Hn),$n=t(105),Jn=t.n($n),_n=Object(d.a)((function(e){var a;return{main:{height:"100%","& .card-box":{minWidth:300,maxWidth:480,width:"100%",padding:"0 10px","& .MuiSvgIcon-root":{fontSize:200,width:"100%"},"& .MuiCardHeader-root":{textAlign:"center"},"& .MuiCard-root":(a={minWidth:300,maxWidth:480,margin:"1rem",width:"100%",height:"min-content"},Object(b.a)(a,e.breakpoints.down("sm"),{maxWidth:"calc(100vw - 1rem)"}),Object(b.a)(a,"& .MuiCardContent-root:last-child",{paddingBottom:16}),a),"& .center":{display:"flex",justifyContent:"center"}}},list:{overflow:"auto",maxHeight:300},dark:{backgroundColor:"#393d46",color:"#fff","& .files":{color:"#4caf50"},"& .MuiSvgIcon-root":{color:"#fff"}},dim:{color:"white","& .files":{color:"#4caf50"},"& .MuiSvgIcon-root":{color:"#ffa726"}}}})),Zn={totalSize:0,total:0,chartData:null,actions:0,parsedSize:""},Vn=[{name:"asd",value:5121},{name:"fgh",value:1231},{name:"jkl",value:1238}],Kn=function(e){var a=e.data,t=void 0===a?Vn:a,n=Object(rt.a)((function(e){return e.breakpoints.up("sm")})),o=t.map((function(e,a){return r.a.createElement(mt.a,{key:"cell-".concat(a),fill:Yn[a%Yn.length]})}));return r.a.createElement(mt.f,{width:"85%",aspect:1},r.a.createElement(mt.e,{width:730,height:250},r.a.createElement(mt.d,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",fill:"#8884d8",paddingAngle:2,innerRadius:"40%",legendType:"square",label:!0},r.a.createElement(mt.b,null),o),r.a.createElement(mt.c,{layout:n?"vertical":"horizontal",verticalAlign:n?"middle":"bottom",align:n?"left":"center",iconType:"square"})))},Xn=function(e){var a=e.type,t=void 0===a?"files":a,n=e.onResponse,o=e.loadingComponent,i=e.dark,l=Boolean("files"===t),c=_n(),s=r.a.useState(Object(fe.a)({},Zn)),u=Object(ge.a)(s,2),m=u[0],d=u[1];if(r.a.useEffect((function(){d(Zn);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};d(Zn),fetch("/api/admin/".concat(t,"/details"),e).then(le).then((function(e){setTimeout((function(){return d(e)}),500)})).catch((function(e){n({key:(new Date).getTime(),type:"error",message:e.message})}))}),[t,n]),!m.chartData)return o;var p=l?"Archivos":"Usuarios",g=m.parsedSize?r.a.createElement(ve.a,{xs:6,item:!0},r.a.createElement(x.a,{align:"center",variant:"subtitle1",component:"p"},r.a.createElement("strong",null,m.parsedSize," "),"Almacenados")):"";return r.a.createElement(ve.a,{container:!0,className:"".concat(c.main," ").concat(i?c.dark:c.dim),justify:"center"},r.a.createElement(ve.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap",className:"card-box"},r.a.createElement(E.a,{raised:!1},r.a.createElement(Za.a,{title:p}),r.a.createElement(Ta.a,null),r.a.createElement(y.a,null,r.a.createElement(ve.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(ve.a,{xs:12,item:!0,container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(x.a,{className:"files",variant:"h2",component:"h2"},m.total),r.a.createElement(x.a,{style:{paddingLeft:5},variant:"h6",component:"h2"},p," en el servidor")),r.a.createElement(ve.a,{xs:6,item:!0},r.a.createElement(x.a,{align:"center",variant:"subtitle1",component:"p"},r.a.createElement("strong",null,m.available," "),"Archivos"===p?"Disponibles":"Activos")),r.a.createElement(ve.a,{xs:6,item:!0},r.a.createElement(x.a,{align:"center",variant:"subtitle1",component:"p"},r.a.createElement("strong",null,m.disabled," "),"Suspendidos")),r.a.createElement(ve.a,{xs:6,item:!0},r.a.createElement(x.a,{align:"center",variant:"subtitle1",component:"p"},r.a.createElement("strong",null,m.actions," "),"Archivos"===p?"Archivos descargados":"Acciones de los usuarios")),g))),r.a.createElement(C.a,{style:{width:"100%"}},r.a.createElement(Jn.a,null))),r.a.createElement(ve.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap",className:"card-box"},r.a.createElement(E.a,{raised:!1},r.a.createElement(Za.a,{title:"Resumen de "+p}),r.a.createElement(Ta.a,null),r.a.createElement(y.a,{className:"center"},r.a.createElement(Kn,{data:m.chartData})))))},Yn=["#0088FE","#00C49F","#FFBB28","#FF8042","#FF6633","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"],Qn=t(693),er=t(694),ar=t(689),tr=t(692),nr=t(691),rr=t(713),or=t(699),ir=t(712),lr=t(672),cr=t(690),sr=Object(d.a)({a:{color:"#228dff"},p0:{padding:"0px"},text:{color:"#fff"},elevation0:{boxShadow:"none",borderRadius:0,maxHeight:"100%",minHeight:"100%"},imageContainer:{display:"flex",flexDirection:"row",justifyContent:"center","& img":{width:"50%",maxWidth:"35px"}},table:{minWidth:650,"& .MuiFormControl-root":{width:"100%"},"& .MuiTableCell-body ":{padding:"8px"},"& .MuiTableRow-root":{"&.disabled":{backgroundColor:"rgba(0, 0, 0, 0.1)"},"&.suspended":{backgroundColor:"rgba(255, 0, 0, 0.2)"}},"& .MuiButtonBase-root":{color:"rgba(0, 0, 0, 0.9)","&.Mui-disabled":{color:"rgba(0, 0, 0, 0.3)"}}},dark:{minWidth:650,"& .MuiFormControl-root":{width:"100%"},"& .MuiTableBody-root":{backgroundColor:"#393d46"},"& .MuiTableRow-root":{"&.disabled":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&.suspended":{backgroundColor:"rgba(255, 0, 0, 0.2)"}},"& .MuiTableCell-body ":{padding:"8px"},"& .MuiTableCell-head":{borderBottom:"2px solid #7d7d7d",backgroundColor:"#424242"},"& .MuiTableCell-body":{borderBottom:"2px solid #7d7d7d"},"& .MuiSelect-select:focus":{backgroundColor:"rgba(255, 255, 255, 0.75)"}}}),ur=function(e){var a=e.nivel,t=e.identifier,n=e.className,o=e.onChange,i=e.disabled;return r.a.createElement(lr.a,{className:n},r.a.createElement(ir.a,{id:"select-label-".concat(t)},"Nivel"),r.a.createElement(or.a,{labelId:"select-label-".concat(t),id:"select-".concat(t),value:a,name:t,disabled:i,onChange:function(e){return o(e.target)}},r.a.createElement($e.a,{value:1},"1"),r.a.createElement($e.a,{value:2},"2"),r.a.createElement($e.a,{value:3},"3"),r.a.createElement($e.a,{value:4},"4"),r.a.createElement($e.a,{value:5},"5")))},mr=function(e){var a=e.columns;if(!a)return"";var t=a.map((function(e,a){var t=e.label,n=e.align;return r.a.createElement(ar.a,{align:n,key:"col-"+a},t)}));return r.a.createElement(cr.a,null,r.a.createElement(nr.a,{style:{zIndex:"20"}},t))},dr=function(e){var a=e.open,t=e.text,n=e.handleClose,o=e.theme,i=e.confirmText,l=void 0===i?"Si, seguro":i,c=e.cancelText,s=void 0===c?"Cancelar":c;if(!a)return"";var u=Object(d.a)((function(e){var a;return{dim:{"& .MuiDialogTitle-root":{backgroundColor:"#4caf50",textAlign:"center",color:"#fff",padding:"12px 0 8px"}},dark:{"& .MuiPaper-root":{backgroundColor:"#666"},"& .MuiDialogTitle-root":{backgroundColor:"#424242",textAlign:"center",color:"#fff",padding:"12px 0 8px"},"& .MuiButton-containedPrimary":{backgroundColor:"#424242"}},dialogContent:(a={margin:"auto",paddingTop:"8px",minWidth:"340px"},Object(b.a)(a,e.breakpoints.down("xs"),{minWidth:"100%"}),Object(b.a)(a,"& h2",{textAlign:"center",padding:"0.5rem 3rem 1rem",fontSize:"1rem"}),Object(b.a)(a,"& .MuiButton-root",{width:"50%",borderRadius:"0",fontWeight:"500"}),Object(b.a)(a,"& .MuiButton-containedPrimary",{fontWeight:"600"}),a)}}))();return r.a.createElement(ea.a,{open:!0,className:o?u.dark:u.dim,onClose:function(){return n()}},r.a.createElement(Qe.a,null,"Dialogo de confirmaci\xf3n"),r.a.createElement(C.a,{className:u.dialogContent},r.a.createElement(x.a,{variant:"subtitle2",component:"h2"},t),r.a.createElement(C.a,null,r.a.createElement(be.a,{variant:"contained",className:"cancel",disableElevation:!0,type:"submit",onClick:function(){return n(!1)},size:"large"},s),r.a.createElement(be.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit",onClick:function(){return n(!0)},size:"large"},l))))},pr=t(174),gr=t.n(pr),fr=[{key:"image",label:"Icono",align:"left"},{key:"ino",label:"ID",align:"left"},{key:"name",label:"Nombre del archivo",align:"left"},{key:"nivel",label:"Nivel",align:"right"},{key:"lastModified",label:"\xdaltima modificaci\xf3n",align:"right"},{key:"size",label:"Tama\xf1o",align:"right"},{key:"dependency",label:"En carpeta",align:"right"},{key:"",label:"",align:"right"}],hr={fileList:null,shouldUpdate:!1,fileToSuspend:null},br=function(e,a){return Object(fe.a)(Object(fe.a)({},hr),{},{fileList:e.fileList},a)},vr=function(e){var a=e.useTheme,t=e.onResponse,n=e.loadingComponent,o=e.criteria,i=sr(),l=r.a.useReducer(br,Object(fe.a)(Object(fe.a)({},hr),{},{shouldUpdate:!0})),c=Object(ge.a)(l,2),s=c[0],u=c[1],m=s.fileList,d=s.shouldUpdate;if(r.a.useEffect((function(){if(d){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};u({shouldUpdate:!1}),fetch("/api/admin/files",e).then(le).then((function(e){e=e.map((function(e,a){return Object(fe.a)(Object(fe.a)({},e),{},{updating:!e.isFile,index:a})})),u({fileList:e})})).catch((function(e){t({key:(new Date).getTime(),type:"error",message:e.message})}))}}),[d,t]),!m)return n;var p=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=Object(pe.a)(m);t[e].updating=a,u({fileList:t})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(tr.a,{className:i.elevation0,component:_e.a,color:"primary"},r.a.createElement(Qn.a,{stickyHeader:!0,className:a?i.dark:i.table},r.a.createElement(mr,{columns:fr}),r.a.createElement(Er,{classes:i,data:m,onChangeSelect:function(e,a){var n=e.name,r=e.value;p(a);var o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({nivel:r})};fetch("/api/files/".concat(n),o).then(le).then((function(e){u({shouldUpdate:!0}),t({key:(new Date).getTime(),type:"success",message:e.message})})).catch((function(e){u({shouldUpdate:!0}),t({key:(new Date).getTime(),type:"error",message:e.response})}))},onClickTrash:function(e){e.isFile&&u({fileToSuspend:Object(fe.a)({},e)})},criteria:o,key:"12gey12"}))),r.a.createElement(dr,{open:s.fileToSuspend,handleClose:function(e){if(e){var a=Object(fe.a)({},s.fileToSuspend);p(s.fileToSuspend.index);var n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};fetch("/api/files/".concat(a.ino),n).then(le).then((function(e){!function(e){var a=Object(pe.a)(m);a[e].available=+!a[e].available,a[e].updating=!1,u({fileList:a})}(a.index),t({key:(new Date).getTime(),type:"success",message:e.message})})).catch((function(e){p(s.fileToSuspend.index,!1),t({key:(new Date).getTime(),type:"error",message:e.response})}))}else u({fileToSuspend:null})},theme:a,text:s.fileToSuspend?s.fileToSuspend.available?"\xbfSeguro deseas dar de baja ".concat(s.fileToSuspend.name,"?"):"\xbfSeguro deseas restaurar ".concat(s.fileToSuspend.name,"?"):""}))},Er=function(e){var a=e.classes,t=e.data,n=e.onChangeSelect,o=e.onClickTrash,i=e.criteria,l=void 0===i?"":i,c=new RegExp(l,"ig"),s=t.reduce((function(e,t){if(l&&!t.name.match(c))return e;var i=fr.map((function(e,i){var l=t[e.key];switch(e.key){case"image":l=r.a.createElement(yr,{value:t,className:a.imageContainer});break;case"nivel":l=r.a.createElement(ur,{nivel:t.nivel,identifier:t.ino.toString(),disabled:t.updating,onChange:function(e){return n(e,t.index)}});break;case"lastModified":l=new Date(t[e.key]||t.birthtime).toLocaleString("es-VE");break;case"":var c=t.available?"Dar de baja":"Restaurar";l=r.a.createElement(rr.a,{title:c},r.a.createElement("span",null,r.a.createElement(Ee.a,{disabled:t.updating,"aria-label":"delete",onClick:function(){return o(t,t.index)}},t.available?r.a.createElement(Jn.a,null):r.a.createElement(gr.a,null))))}var s="name"===e.key?"th":"td";return r.a.createElement(ar.a,{component:s,scope:"row",className:i&&"nivel"!==e.key?"":a.p0,align:e.align,key:"col-".concat(i)},l)})),s=r.a.createElement(nr.a,{className:function(){switch(!0){case t.updating:return"disabled";case!t.available:return"suspended";default:return""}}(),key:t.ino},i);return[].concat(Object(pe.a)(e),[s])}),[]);return r.a.createElement(er.a,null,s)},yr=function(e){var a=e.value,t=e.className;return r.a.createElement("div",{className:t},r.a.createElement("img",{src:ce(a.isFile,a.ext),alt:a.ext,width:"24px"}))},xr=[{key:"id",label:"ID",align:"left"},{key:"usuario",label:"Usuario",align:"left"},{key:"nombre",label:"Nombre",align:"left"},{key:"nivel",label:"Nivel",align:"right"},{key:"desde",label:"Miembro desde",align:"right"},{key:"active",label:"Estado",align:"right"},{key:"",label:"",align:"right"}],wr={userList:null,changePassword:null,userToSuspend:null,shouldUpdate:!1},Cr=function(e,a){return Object(fe.a)(Object(fe.a)({},wr),{},{userList:e.userList},a)},kr=function(e){var a=e.useTheme,t=e.adminID,n=e.onResponse,o=e.loadingComponent,i=e.criteria,l=sr(),c=r.a.useReducer(Cr,Object(fe.a)(Object(fe.a)({},wr),{},{shouldUpdate:!0})),s=Object(ge.a)(c,2),u=s[0],m=s[1],d=u.userList,p=u.shouldUpdate;if(r.a.useEffect((function(){if(p){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};m({shouldUpdate:!1}),fetch("/api/admin/users",e).then(le).then((function(e){e=e.map((function(e,a){return Object(fe.a)(Object(fe.a)({},e),{},{short:e.id.slice(-5),updating:t===e.id,index:a})})),m({userList:e})})).catch((function(e){n({key:(new Date).getTime(),type:"error",message:e.message})}))}}),[p,t,n]),!d)return o;var g=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=Object(pe.a)(d);t[e].updating=a,m({userList:t})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(tr.a,{className:l.elevation0,component:_e.a,color:"primary"},r.a.createElement(Qn.a,{stickyHeader:!0,className:a?l.dark:l.table},r.a.createElement(mr,{columns:xr}),r.a.createElement(jr,{classes:l,data:d,onChangeSelect:function(e,a){var t=e.name,r=e.value;g(a);var o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({nivel:r})};fetch("/api/users/".concat(t),o).then(le).then((function(e){m({shouldUpdate:!0}),n({key:(new Date).getTime(),type:"success",message:e.response})})).catch((function(e){m({shouldUpdate:!0}),n({key:(new Date).getTime(),type:"error",message:e.message})}))},onClickLock:function(e,a){m(Object(fe.a)(Object(fe.a)({},u),{},{changePassword:Object(fe.a)(Object(fe.a)({},e),{},{index:a})}))},onClickTrash:function(e,a){t!==e.id&&m(Object(fe.a)(Object(fe.a)({},u),{},{userToSuspend:Object(fe.a)(Object(fe.a)({},e),{},{index:a})}))},criteria:i,key:"12gey12"}))),r.a.createElement(Pt,{user:u.changePassword,handleClose:function(e){if(e){g(e.index);var a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({password:e.password})};fetch("/api/users/".concat(e.userID),a).then(le).then((function(a){g(e.index,!1),n({key:(new Date).getTime(),type:"success",message:a.response})})).catch((function(a){g(e.index,!1),n({key:(new Date).getTime(),type:"error",message:a.message})}))}else m({changePassword:null})}}),r.a.createElement(dr,{open:u.userToSuspend,handleClose:function(e){if(e){var a=Object(fe.a)({},u.userToSuspend);g(u.userToSuspend.index);var t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({active:+!a.active})};fetch("/api/users/".concat(a.id),t).then(le).then((function(e){!function(e){var a=Object(pe.a)(d);a[e].active=+!a[e].active,a[e].updating=!1,m({userList:a})}(a.index),n({key:(new Date).getTime(),type:"success",message:e.response})})).catch((function(e){g(u.userToSuspend.index,!1),n({key:(new Date).getTime(),type:"error",message:e.message})}))}else m({userToSuspend:null})},theme:a,text:u.userToSuspend?u.userToSuspend.active?"\xbfSeguro deseas suspender a ".concat(u.userToSuspend.usuario,"?"):"\xbfSeguro deseas reactivar la cuenta de ".concat(u.userToSuspend.usuario,"?"):""}))},jr=function(e){var a=e.classes,t=e.data,n=e.onChangeSelect,o=e.onClickLock,i=e.onClickTrash,l=e.criteria,c=void 0===l?"":l,s=new RegExp(c,"ig"),u=t.reduce((function(e,t){var l=t.usuario.match(s)||t.nombre.match(s)||t.apellido.match(s);if(c&&!l)return e;var u=xr.map((function(e,l){var c=t[e.key];switch(e.key){case"id":c=t.short;break;case"nivel":c=r.a.createElement(ur,{nivel:t.nivel,identifier:t.id,disabled:t.updating,onChange:function(e){return n(e,t.index)}});break;case"active":c=t.active?"Activo":"Suspendido";break;case"nombre":c="".concat(t.nombre," ").concat(t.apellido);break;case"":var s=t.active?"Suspender usuario":"Reactivar usuario";c=r.a.createElement(r.a.Fragment,null,r.a.createElement(rr.a,{title:"Cambiar contrase\xf1a"},r.a.createElement("span",null,r.a.createElement(Ee.a,{disabled:t.updating,"aria-label":"edit-password",onClick:function(){return o(t,t.index)}},r.a.createElement(Mt.a,null)))),r.a.createElement(rr.a,{title:s},r.a.createElement("span",null,r.a.createElement(Ee.a,{disabled:t.updating,"aria-label":"delete",onClick:function(){return i(t,t.index)}},t.active?r.a.createElement(Jn.a,null):r.a.createElement(gr.a,null)))))}var u="nombre"===e.key||"usuario"===e.key?"th":"td";return r.a.createElement(ar.a,{component:u,scope:"row",className:"nivel"===e.key?a.p0:"",align:e.align,key:"col-".concat(l,"-").concat(t.ino)},c)})),m=r.a.createElement(nr.a,{className:function(){switch(!0){case t.updating:return"disabled";case!t.active:return"suspended";default:return""}}(),key:"row-".concat(t.id)},u);return[].concat(Object(pe.a)(e),[m])}),[]);return r.a.createElement(er.a,null,u)},Or=Object(d.a)((function(){return{report:{width:"100%","& .MuiCard-root":{margin:"1rem"},"& .MuiCardContent-root":{padding:0},"& .MuiList-root":{backgroundColor:"transparent !important",boxShadow:"none"},"& .MuiGrid-root":{padding:10}}}})),Sr=[{url:"files/report",filename:"reporte_archivos",index:1},{url:"files/downloaded",filename:"reporte_descargas",index:2},{url:"files/read",filename:"reporte_solicitudes",index:3},{url:"users/activity",filename:"reporte_logs",index:4}],Tr=function(){var e=Or(),a=r.a.useState(0),t=Object(ge.a)(a,2),n=t[0],o=t[1],i=function(e){var a=e.url,t=e.filename,r=e.index;if(!n){o(r);var i={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}};fetch("/api/admin/".concat(a),i).then((function(e){return e.blob()})).then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download="".concat(t,".pdf"),document.body.appendChild(n),n.click(),n.remove(),o(0)}))}};return r.a.createElement(C.a,{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",className:"".concat(e.report," min-h100")},r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(Xa.a,{subheader:r.a.createElement(Rn.a,{component:"div",id:"subheader"},"Reportes")},r.a.createElement(Ya.a,{button:!0,selected:1===n,onClick:function(){return i(Sr[0])}},r.a.createElement(et.a,{primary:"Reporte de archivos",secondary:"Resumen de todos los archivos en el servidor, quien los subi\xf3 y cuando"})),r.a.createElement(Ta.a,null),r.a.createElement(Ya.a,{button:!0,selected:2===n,onClick:function(){return i(Sr[1])}},r.a.createElement(et.a,{primary:"Historial de descargas",secondary:"Registro de todas las descargas solicitadas por usuarios"})),r.a.createElement(Ta.a,null),r.a.createElement(Ya.a,{button:!0,selected:3===n,onClick:function(){return i(Sr[2])}},r.a.createElement(et.a,{primary:"Historial de solicitudes",secondary:"Registro de las solicitudes de archivos por parte de los usuarios"})),r.a.createElement(Ta.a,null),r.a.createElement(Ya.a,{button:!0,selected:4===n,onClick:function(){return i(Sr[3])}},r.a.createElement(et.a,{primary:"Logs",secondary:"Detalles de los ingresos al sistema"})),r.a.createElement(Ta.a,null)),n?r.a.createElement(ve.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(l.a,{size:40,thickness:5})):"")))},Nr=Object(d.a)((function(e){var a;return{main:(a={display:"grid"},Object(b.a)(a,e.breakpoints.down("xs"),{display:"flex",width:"100%","& .MuiBox-root":{width:"100%"}}),Object(b.a)(a,"gridTemplateColumns","250px 1fr"),Object(b.a)(a,"height","100%"),Object(b.a)(a,"overflow","auto"),Object(b.a)(a,"& .spinner-container",{minHeight:"100%",minWidth:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),Object(b.a)(a,"& .right-column",{height:"100%",overflow:"auto"}),Object(b.a)(a,"& .MuiList-root",{boxShadow:"5px 0 5px -5px #333",width:"100%",height:"100%",oveflow:"auto",zIndex:"10","& .MuiAvatar-root":{backgroundColor:"transparent"},"& .MuiSvgIcon-root":{fontSize:"40px"},"& .MuiListItem-root:hover":{backgroundColor:"rgba(0,0,0,0.3)"},"& .MuiListSubheader-root":{position:"static",fontWeight:"500",fontSize:"18px",color:"#000",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}}),a),dim:{backgroundColor:"#fff9c4","& .MuiList-root":{backgroundColor:"#ffa726","& .MuiSvgIcon-root":{color:"#000"}},"& .MuiCircularProgress-colorPrimary":{color:"#4caf50"}},dark:{backgroundColor:"#393d46","& .MuiList-root":{backgroundColor:"#666",color:"#fff","& .MuiSvgIcon-root":{color:"#fff"},"& .MuiListSubheader-root":{color:"#fff",borderBottomColor:"#cecece"}},"& .MuiCircularProgress-colorPrimary":{color:"#fff"}},card:{height:"100%",borderRadius:0,"&>*":{overflow:"hidden auto",height:"100%"}},drawerPaper:{width:240}}})),Mr=[{link:"/archivos/detalles",component:Pn.a,primaryText:"Detalles de archivos",helperText:"Ver resumen de los archivos"},{link:"/archivos/lista",component:Ln.a,primaryText:"Administrar Archivos",helperText:"Modificar estatus de los archivos"},{link:"/usuarios/detalles",component:Wn.a,primaryText:"Detalles de usuarios",helperText:"Ver resumen de los usuarios"},{link:"/usuarios/lista",component:Bn.a,primaryText:"Administrar usuarios",helperText:"Modificar estatus de los usuarios"},{link:"/reportes",component:Un.a,primaryText:"Reportes",helperText:"Descargar reportes en formato PDF"}],Ir=function(e,a){return Object(fe.a)(Object(fe.a)({},e),a)},Rr=function(e){var a=e.window,t=Nr(),o=Object(f.h)(),i=Object(Nn.a)(),l=Object(n.useContext)(Ae),c=l.state,s=l.dispatch,u=r.a.useReducer(Ir,{selectedIndex:0,snackPack:[],open:!1,messageInfo:void 0}),m=Object(ge.a)(u,2),d=m[0],p=m[1];r.a.useEffect((function(){var a=Mr.findIndex((function(a){var t=e.match.path+a.link;return o.pathname===t}));p({selectedIndex:a})}),[o.pathname,e.match.path]),r.a.useEffect((function(){d.snackPack.length&&!d.messageInfo?p({messageInfo:Object(fe.a)({},d.snackPack[0]),snackPack:d.snackPack.slice(1),open:!0}):d.snackPack.length&&d.open&&p({open:!1,messageInfo:void 0})}),[d]);var g=function(e){p({snackPack:[].concat(Object(pe.a)(d.snackPack),[{key:(new Date).getTime(),type:e.type,message:e.message}])})},h=function(){return r.a.createElement(Xa.a,{subheader:r.a.createElement(Rn.a,{component:"div",id:"subheader"},"Configuraciones")},Mr.map((function(a,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(Ya.a,{button:!0,component:ie,to:e.match.path+a.link,selected:d.selectedIndex===t,onClick:function(){return v()}},r.a.createElement(In.a,null,r.a.createElement(_a.a,null,r.a.createElement(a.component,null))),r.a.createElement(et.a,{primary:a.primaryText,secondary:a.helperText})),r.a.createElement(Ta.a,null))})))},b=void 0!==a?function(){return a().document.body}:void 0,v=function(){s({type:"update",payload:{mobileOpen:!1}})},E=r.a.createElement(Pr,{useDark:c.theme});return r.a.createElement(C.a,{component:"main",display:"flex",className:function(){var e=t.main;return e+=c.theme?" ".concat(t.dark):" ".concat(t.dim)}()},r.a.createElement(Mn.a,{smUp:!0,implementation:"css"},r.a.createElement(tn.a,{container:b,variant:"temporary",anchor:i.direction="right",open:c.mobileOpen,onClose:v,ModalProps:{keepMounted:!0},classes:{paper:t.drawerPaper}},h())),r.a.createElement(Mn.a,{xsDown:!0,implementation:"css"},r.a.createElement(tn.a,{className:"min-h100",classes:{paper:"position-static"},variant:"permanent",open:!0},h())),r.a.createElement(C.a,{component:"div",className:"right-column"},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:e.match.path,component:Fr}),r.a.createElement(f.b,{path:"".concat(e.match.path,"/archivos/lista"),render:function(){return r.a.createElement(vr,{useTheme:c.theme,criteria:c.search,onResponse:g,loadingComponent:E})}}),r.a.createElement(f.b,{path:"".concat(e.match.path,"/archivos/detalles"),render:function(){return r.a.createElement(Xn,{key:"files",dark:c.theme,onResponse:g,loadingComponent:E})}}),r.a.createElement(f.b,{path:"".concat(e.match.path,"/usuarios/lista"),render:function(){return r.a.createElement(kr,{useTheme:c.theme,adminID:c.user.id,criteria:c.search,onResponse:g,loadingComponent:E})}}),r.a.createElement(f.b,{path:"".concat(e.match.path,"/usuarios/detalles"),render:function(){return r.a.createElement(Xn,{key:"users",dark:c.theme,type:"users",onResponse:g,loadingComponent:E})}}),r.a.createElement(f.b,{path:"".concat(e.match.path,"/reportes"),component:Tr}))),r.a.createElement(Ar,{onClose:function(e,a){"clickaway"!==a&&p({open:!1,messageInfo:void 0})},onExit:function(){p({messageInfo:void 0})},data:d.messageInfo,open:d.open}))},Fr=function(){return r.a.createElement(C.a,{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",className:"min-h100",style:{width:"100%"}},r.a.createElement(E.a,null,r.a.createElement(y.a,{style:{paddingBottom:"0px"}},r.a.createElement(x.a,{variant:"h5",component:"h2"},"\xa1Bienvenido!"),r.a.createElement(x.a,{variant:"body2",component:"p"},"Desde esta p\xe1gina puedes gestionar el contenido de Cloudster."),r.a.createElement(x.a,{variant:"body2",component:"p"},"Procede con precauci\xf3n."),r.a.createElement(Gn.a,{style:{marginTop:"1rem",fontSize:"100px"}}))))},Pr=function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement(l.a,{size:100,thickness:5}))},Ar=function(e){var a=e.onClose,t=e.onExit,n=e.open,o=e.data;if(!n)return"";var i=o.message,l=o.type,c=o.key;return r.a.createElement(xe.a,{key:c||"asdgaryisthebest",anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,onClose:a,onExited:t,autoHideDuration:2e3},r.a.createElement(Fe.a,{severity:l||"success",elevation:6,variant:"filled",onClose:a},i))},Wr=function(e){var a=e.requireAdmin,t=void 0!==a&&a,o=e.requireLogin,i=void 0===o||o,l=e.redirectTo,c=void 0===l?"/notlogged":l,s=Object(Ue.a)(e,["requireAdmin","requireLogin","redirectTo"]),u=Object(n.useContext)(Ae).state;return i&&!u.logStatus?r.a.createElement(f.b,null,r.a.createElement(f.a,{to:c})):t&&u.user.nivel<5?r.a.createElement(f.b,null,r.a.createElement(f.a,{to:"/busqueda"})):r.a.createElement(f.b,s)},Dr=Object(d.a)((function(e){return{toolbar:e.mixins.toolbar,theme:{backgroundColor:e.palette.background.default,color:e.palette.text.primary},fullBackg:{backgroundImage:"url(".concat(ue.a,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?"#cecece":e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},dark:{backgroundColor:"#393d46"},dim:{backgroundColor:"#fff9c4"}}})),Lr=Object(p.a)({typography:{h2:{fontSize:"3.75rem",fontWeight:300,lineHeight:1.2,letterSpacing:"-0.00833em",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],"@media (min-width:600px)":{fontSize:"3.75rem"},"@media (min-width:0px)":{fontSize:"3.25rem"}},h4:{fontSize:"2.15rem",fontWeight:400,lineHeight:1.235,letterSpacing:"0.00735em",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],"@media (min-width:600px)":{fontSize:"2.15rem"},"@media (min-width:0px)":{fontSize:"1.75rem"}}},palette:{primary:{main:s.a[500]},secondary:{main:m.a[400]},textPrimary:{main:"#FFF"}}}),zr=Object(p.a)({typography:{h2:{fontSize:"3.75rem",fontWeight:300,lineHeight:1.2,letterSpacing:"-0.00833em",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],"@media (min-width:600px)":{fontSize:"3.75rem"},"@media (min-width:0px)":{fontSize:"3.25rem"}},h4:{fontSize:"2.15rem",fontWeight:400,lineHeight:1.235,letterSpacing:"0.00735em",fontFamily:["Roboto","Helvetica","Arial","sans-serif"],"@media (min-width:600px)":{fontSize:"2.15rem"},"@media (min-width:0px)":{fontSize:"1.75rem"}}},palette:{type:"dark",primary:{main:"#424242"},secondary:{main:"#252525"},primaryText:{main:"#FFF"}}}),Br=function(){var e=Dr(),a=Object(n.useContext)(Ae),t=a.state,o=a.dispatch;!function(e){var a=r.a.useRef(!1);r.a.useEffect((function(){a.current||(e(),a.current=!0)}))}((function(){var e=localStorage.getItem("token"),a=localStorage.getItem("theme");if(!e)return o({type:"update",payload:{logStatus:0}}),void localStorage.clear();o({type:"update",payload:{logStatus:1,theme:Boolean(a)}}),fetch("/api/users/token",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(le).then((function(e){return o({type:"login",payload:{user:e}})})).catch((function(){localStorage.clear(),o({type:"update",payload:{logStatus:0}})}))}));if(1===t.logStatus){return r.a.createElement("div",{style:{minHeight:"100%",minWidth:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(l.a,{size:100,thickness:5}))}return r.a.createElement(g.a,{theme:t.theme?zr:Lr},r.a.createElement(h.a,{basename:"/"},r.a.createElement("div",{className:"container ".concat(t.theme?e.dark:e.dim,"\n        ").concat(t.logStatus?"":"initial-height")},r.a.createElement(f.b,{component:On,path:["/perfil","/configuracion","/busqueda","/transfers","/reproductor","/admin"]}),r.a.createElement(f.b,{component:fn,path:["/perfil","/configuracion","/busqueda","/transfers","/reproductor","/admin"]}),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(f.a,{to:"/login"})}}),r.a.createElement(f.b,{className:e.fullBackg,exact:!0,path:"/login",component:La}),r.a.createElement(f.b,{className:e.fullBackg,exact:!0,path:"/recover",component:Ja}),r.a.createElement(f.b,{className:e.fullBackg,exact:!0,path:"/register",component:Xt}),r.a.createElement(f.b,{exact:!0,path:"/notlogged",component:de}),r.a.createElement(Wr,{exact:!0,path:"/reproductor",component:an}),r.a.createElement(Wr,{exact:!0,path:"/busqueda",component:ka}),r.a.createElement(Wr,{exact:!0,path:"/perfil",component:Et}),r.a.createElement(Wr,{exact:!0,path:"/configuracion",component:$t}),r.a.createElement(Wr,{requireAdmin:!0,path:"/admin",component:Rr}),r.a.createElement(f.b,{path:"/404",component:Tn}),r.a.createElement(f.a,{from:"*",to:"/404"})))))},qr=(t(615),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Ur(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(Le,null,r.a.createElement(Br,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");qr?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ur(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ur(a,e)}))}}()}},[[405,1,2]]]);
//# sourceMappingURL=main.df5b3509.chunk.js.map